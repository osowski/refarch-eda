{"version":3,"sources":["webpack:///./src/pages/use-cases/connect-jdbc/index.mdx"],"names":["_frontmatter","makeShortcode","name","props","console","warn","InlineNotification","AnchorLinks","AnchorLink","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","kind","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-use-cases-connect-jdbc-index-mdx-88e1930b8016fe1f2236.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/refarch-eda/refarch-eda/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component '\" + name + \"' was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineNotification = makeShortcode(\"InlineNotification\");\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <InlineNotification kind=\"warning\" mdxType=\"InlineNotification\">\n      <strong>TODO</strong> - Work in progress\n    </InlineNotification>\n    <AnchorLinks mdxType=\"AnchorLinks\">\n      <AnchorLink mdxType=\"AnchorLink\">Pre-requisites</AnchorLink>\n      <AnchorLink mdxType=\"AnchorLink\">Run the Kafka Connector in distributed mode</AnchorLink>\n      <AnchorLink mdxType=\"AnchorLink\">Upload the DB2 sink definition</AnchorLink>\n      <AnchorLink mdxType=\"AnchorLink\">Generate some records</AnchorLink>\n      <AnchorLink mdxType=\"AnchorLink\">Verify records are uploaded into the Inventory database</AnchorLink>\n    </AnchorLinks>\n    <p>{`This scenario is using the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-messaging/kafka-connect-jdbc-sink\"\n      }}>{`IBM Kafka Connect sink connector for JDBC`}</a>{` to get data from the `}<inlineCode parentName=\"p\">{`inventory topic`}</inlineCode>{` and write records to the `}<inlineCode parentName=\"p\">{`inventory`}</inlineCode>{` table in DB2. This lab explain the definition of the connector and how to run an integration test that sends data to the inventory topic.`}</p>\n    <h2>{`Pre-requisites`}</h2>\n    <InlineNotification kind=\"warning\" mdxType=\"InlineNotification\"><strong>TODO</strong></InlineNotification>\n    <p><em parentName=\"p\">{`Pull in necessary pre-req context from `}<a parentName=\"em\" {...{\n          \"href\": \"/refarch-eda/scenarios/realtime-inventory/#general-pre-requisites\"\n        }}>{`Realtime Inventory Pre-reqs`}</a>{`.`}</em></p>\n    <p>{`As a pre-requisite you need to have a `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/docs/Db2onCloud?topic=Db2onCloud-getting-started\"\n      }}>{`DB2 instance on cloud`}</a>{` up and running with defined credentials. From the credentials you need the username, password and the `}<inlineCode parentName=\"p\">{`ssljdbcurl`}</inlineCode>{` parameter. Something like “jdbc:db2://dashdb-tx…net:50001/BLUDB:sslConnection=true;“.`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Build and deploy the `}<inlineCode parentName=\"p\">{`inventory-app`}</inlineCode>{`. This application is a simple Java microprofile 3.3 app exposing a set of end points for cRUD operations on stores, items and inventory. It is based on `}<a parentName=\"p\" {...{\n            \"href\": \"https:quarkus.io\"\n          }}>{`Quarkus`}</a>{`. The instructions to build, and deploy this app is in the `}<a parentName=\"p\" {...{\n            \"href\": \"https://github.com/jbcodeforce/eda-kconnect-lab/tree/master/inventory-app\"\n          }}>{`README`}</a>{` under the `}<inlineCode parentName=\"p\">{`inventory-app`}</inlineCode>{` folder of `}<a parentName=\"p\" {...{\n            \"href\": \"https://github.com/jbcodeforce/eda-kconnect-lab\"\n          }}>{`this repository`}</a>{`. At the application starts stores and items records are uploaded to the database.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Verify the stores and items records are loaded`}</p>\n      </li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`If you deploy the `}<inlineCode parentName=\"p\">{`inventory-app`}</inlineCode>{` from previous step, then you will have the database created and populated with some stores and items automatically. If you want to drop the data use `}<a parentName=\"p\" {...{\n            \"href\": \"https://raw.githubusercontent.com/jbcodeforce/eda-kconnect-lab/master/inventory-app/src/main/resources/drop.sql\"\n          }}>{`the drop sql script`}</a>{` and then reload them the `}<a parentName=\"p\" {...{\n            \"href\": \"https://raw.githubusercontent.com/jbcodeforce/eda-kconnect-lab/master/inventory-app/src/main/resources/import.sql\"\n          }}>{`insert sql script`}</a>{` from `}<inlineCode parentName=\"p\">{`inventory-app/src/main/resources`}</inlineCode>{` folder. For that you can use the `}<inlineCode parentName=\"p\">{`Run sql`}</inlineCode>{` menu in the DB2 console:`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"574px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"82.9861111111111%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACWklEQVQ4y6VS70tTYRS+IETSKiOzdCxszbaV6ea2LFMhNZcVZn0pQYroi31MZxZkc7W5VQpBEER/TdBf0IcRLHJtd679Xvt5d9+7+/S+76qP0daBh8N7Oee5z3POEbqHptBjm4bWPgOt7RI6jTYcOEHRN4R9egv2H7fw3GGwYq9+EJpjA+g0OXDIfOZXHkbXybM4aLTzGsHsegDLphe9M9ehHZiAzjoK5827GJudx8L9ZVyev4eJGwv827Xbi5i7swjD8CQOnzqHLuMg+q+uwHrrNexTs5ikdYJm/CI6rsyhnRbs7nVgl9aEntMj/I+mkWnoHRegs4xxMCLTeSfaj/ajrduItiMG7Okbh8bs5Gp1llEIa4G3eOJ9g/Wt93BvvcPqsxdwrQew4glgac2HZfcGXG4/x9LTDQofHj1/icfeVxSbtN6PVY8PDz2szw8BKnj8yOcgVSv43xCkYgWFQgG5XI7ner0Ooiio1WTU5OYhQFFRKpWQzWY5YSqZ4m8WdVWF2iQEKVngZGJMRDKVQjQaRT6f54RqK4QKbZSpPaWmgNQIFEItEwWSJDdsNwmBOkbmSxyRD0EkPn2D+PEz8tE0ZKXOSSWJNAVKqFKFhCtk6uSKDCIrLanjCkmhikwmg0g0glgshkQygZ14nM+DTrH5GZKShEqlws+GLaNYKPJtt7IQTqjSWTFCRsaIisUGISGE36RCb5LlfwU/G2aZ2c2kqfVIBKIocqJWTkdgTUq9oeJ3MLJWIVS/55FOpxEKhRAMBrH9dRtxuhT2ZkfOcjgcRrlc/qP4b/ETLR+K1oMHtqcAAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"DB1\",\n            \"title\": \"DB1\",\n            \"src\": \"/refarch-eda/static/2d4d80e816e3a178ffb05e7fb2149271/9f151/db2-1.png\",\n            \"srcSet\": [\"/refarch-eda/static/2d4d80e816e3a178ffb05e7fb2149271/7fc1e/db2-1.png 288w\", \"/refarch-eda/static/2d4d80e816e3a178ffb05e7fb2149271/9f151/db2-1.png 574w\"],\n            \"sizes\": \"(max-width: 574px) 100vw, 574px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n        <p parentName=\"li\">{`Select the database schema matching the username used as credential, and then open the SQL editor:`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"960px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"52.77777777777778%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABbElEQVQoz4WSW0/DMAyF+/9/GU8IHhCPMDGJrsvWtUmcOLeD3V002DQiHTl1mq/HdruXt3c8Pb+CQsC91Vr7N6/7s7rIDPIBmTNaqai5oGqsFfLKckH3KaWLSimX/N8PdnqHzQy3GuDXO9iPDfyXAZkJ0R9d55zR9z367+8lzvO85EOIiJF/ueymzR40HEDbCU5iELjdjAjyrPvESYBFXIlLASucWZ3mBSgU1OuSx8kiSwmtHS9ooblkFHmuIj0L4kIBJACFEUXJRVjrb/rZsRykXEFJQLXJviBKi1JpCFmBFY/WGXZxGIhghWCogbjABcY+NNgE7KSikO9P86wbh0QeToA7Baa6AA8Cmq3DaAZshwHGmMtkb6G4ijg61NJmbmApj+W3cOIuSs8s6RSD9E8neXbRHragI+8wTIzV2GBswXBgrKeGwTV8Ss6GipgBzyptCx6qK0Wnl8TRKSkxnA4lDS/lu9hOwlW8rx8sxl6YoEML8AAAAABJRU5ErkJggg==')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"DB2\",\n            \"title\": \"DB2\",\n            \"src\": \"/refarch-eda/static/5ed9fa483ad840a441751caa25ddac91/4552c/db2-2.png\",\n            \"srcSet\": [\"/refarch-eda/static/5ed9fa483ad840a441751caa25ddac91/7fc1e/db2-2.png 288w\", \"/refarch-eda/static/5ed9fa483ad840a441751caa25ddac91/a5df1/db2-2.png 576w\", \"/refarch-eda/static/5ed9fa483ad840a441751caa25ddac91/4552c/db2-2.png 960w\"],\n            \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n        <p parentName=\"li\">{`Verify the items with `}<inlineCode parentName=\"p\">{`select * from items;`}</inlineCode></p>\n        <p parentName=\"li\">{` `}<span parentName=\"p\" {...{\n            \"className\": \"gatsby-resp-image-wrapper\",\n            \"style\": {\n              \"position\": \"relative\",\n              \"display\": \"block\",\n              \"marginLeft\": \"auto\",\n              \"marginRight\": \"auto\",\n              \"maxWidth\": \"1152px\"\n            }\n          }}>{`\n      `}<span parentName=\"span\" {...{\n              \"className\": \"gatsby-resp-image-background-image\",\n              \"style\": {\n                \"paddingBottom\": \"54.166666666666664%\",\n                \"position\": \"relative\",\n                \"bottom\": \"0\",\n                \"left\": \"0\",\n                \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABVUlEQVQoz3WSWY7EIAxEc/9TTmZairKvhC2Jh0cLmp+2ZAHGLpeXSq5HjkvLqFfZ113O85TjOLIiz/NETXfkvm9RSonWWuZ5FudctFcAqtvIoGZZl1W00bLvu6zrKtu2ZbASFLmuKyYEdJqmD2Bw+zjtRh7j5ZsQNI5jrAJA1Dsv7tDhfod/HxgCFOhvwyzLXydj3YjelDjvIkBS770YYzJgYmeNjWVba6NflTIP/SDTMMrvTy3qUDGoVIIAqetalmWRtm1jqQCRiH/83gwDXYynfgffz51LSsoQSExfudNngAFNrLFXaWJkSiy+CcAMC8EPQN7zVE45iLVk3vN0+SRBqdhICBtO/Pq+jwxhTYW5hyY0dgpZ+MQp9aRUbAyhaZrIjh6+Xq948oYMmktOIASVy1zuX9o93uXys9ip/Lw2NJXpQv8bIKtDFbwB6LouMkRJhvwDGxRYufItiB0AAAAASUVORK5CYII=')\",\n                \"backgroundSize\": \"cover\",\n                \"display\": \"block\"\n              }\n            }}></span>{`\n  `}<img parentName=\"span\" {...{\n              \"className\": \"gatsby-resp-image-image\",\n              \"alt\": \"DB2\",\n              \"title\": \"DB2\",\n              \"src\": \"/refarch-eda/static/a769df08d731b8e9040cafb444d06da7/3cbba/db2-3.png\",\n              \"srcSet\": [\"/refarch-eda/static/a769df08d731b8e9040cafb444d06da7/7fc1e/db2-3.png 288w\", \"/refarch-eda/static/a769df08d731b8e9040cafb444d06da7/a5df1/db2-3.png 576w\", \"/refarch-eda/static/a769df08d731b8e9040cafb444d06da7/3cbba/db2-3.png 1152w\", \"/refarch-eda/static/a769df08d731b8e9040cafb444d06da7/e3892/db2-3.png 1186w\"],\n              \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n              \"style\": {\n                \"width\": \"100%\",\n                \"height\": \"100%\",\n                \"margin\": \"0\",\n                \"verticalAlign\": \"middle\",\n                \"position\": \"absolute\",\n                \"top\": \"0\",\n                \"left\": \"0\"\n              },\n              \"loading\": \"lazy\"\n            }}></img>{`\n    `}</span></p>\n        <p parentName=\"li\">{`Verify the stores with `}<inlineCode parentName=\"p\">{`select * from stores;`}</inlineCode></p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"47.56944444444444%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABNElEQVQoz32SiW6DMBBE+f+/jNQmCgQCGB9gYOrnxhGKSi1WPpjdnRm7GlarwRnZySqEoGmaZK3Nse+7ymBd9uu6ynsv55zGcdS2bW9M1W9WzdhqGAY57/R8PvO67/t3gWNhxrIsMsbkAEeDd8HflukzQXuIOhswejweeY4x5uS4REUXtCaGS1pTuOKnqTv1X7X670bBei3pDBYlwGAHNjDP85ylInlKLDkHh/TKudS5btSkYJ5TAsC/AnYEBS6XS7bnfr/rer3mRrlgjGtmAKht2+wJP6B/FuDBwZS8cp49LMl05jIwuph8NkgEW/KOl1eFl0QAmI4EisICBp+BV+Sgpjyb7Gvx0OZDo67rdLvdVNe1TNoDKp59BjLB0pjC7L1/eVj0A6To8U39J7lYA8vtkPMD6AIMXP0i7A0AAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"DB2\",\n            \"title\": \"DB2\",\n            \"src\": \"/refarch-eda/static/d56157f8db1b9bf3d5003babec4b9453/3cbba/db2-4.png\",\n            \"srcSet\": [\"/refarch-eda/static/d56157f8db1b9bf3d5003babec4b9453/7fc1e/db2-4.png 288w\", \"/refarch-eda/static/d56157f8db1b9bf3d5003babec4b9453/a5df1/db2-4.png 576w\", \"/refarch-eda/static/d56157f8db1b9bf3d5003babec4b9453/3cbba/db2-4.png 1152w\", \"/refarch-eda/static/d56157f8db1b9bf3d5003babec4b9453/bed59/db2-4.png 1232w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n        <p parentName=\"li\">{`The inventory has one record to illustrate the relationship between store, item and inventory.`}</p>\n      </li>\n    </ul>\n    <h2>{`Run the Kafka Connector in distributed mode`}</h2>\n    <p>{`The docker image built in the `}<a parentName=\"p\" {...{\n        \"href\": \"#scenario-setup\"\n      }}>{`setup`}</a>{` has the configuration for kafka connect distributed cluster, we need in this scenario to start the connector and upload the DB2 Sink connector definition. To start it, run the script `}<inlineCode parentName=\"p\">{`./createOrStartKconnect.sh start`}</inlineCode>{` under `}<inlineCode parentName=\"p\">{`kconnect`}</inlineCode>{` folder.`}</p>\n    <h2>{`Upload the DB2 sink definition`}</h2>\n    <p>{`Rename the file `}<inlineCode parentName=\"p\">{`db2-sink-config-TMPL.json`}</inlineCode>{` as `}<inlineCode parentName=\"p\">{`db2-sink-config.json`}</inlineCode>{` and modify the DB2 server URL, DB2 username and password. The DB schema matches the user name, so update this setting for the `}<inlineCode parentName=\"p\">{`table.name.format`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`  \"name\": \"jdbc-sink-connector\",\n  \"config\": {\n    \"connector.class\": \"com.ibm.eventstreams.connect.jdbcsink.JDBCSinkConnector\",\n    \"tasks.max\": \"1\",\n    \"topics\": \"inventory\",\n    \"connection.url\": \"jdbc:db2://....services.dal.bluemix.net:50001/BLUDB:sslConnection=true;\",\n    \"connection.user\": \"<username>\",\n    \"connection.password\": \"<password>\",\n    \"connection.ds.pool.size\": \"1\",\n    \"insert.mode.databaselevel\": \"true\",\n    \"table.name.format\": \"<username>.INVENTORY\"\n  }\n`}</code></pre>\n    <p>{`Once done, you can run the `}<inlineCode parentName=\"p\">{`./sendJdbcSinkConfig.sh url-kafka-connect`}</inlineCode>{` to upload the above definition to the Kafka connect controller. When running locally the command is `}<inlineCode parentName=\"p\">{`./sendJdbcSinkConfig.sh localhodt:8083`}</inlineCode>{`. This script delete previously define connector with the same name, and then perform a POST operation on the `}<inlineCode parentName=\"p\">{`/connectors`}</inlineCode>{` end point.`}</p>\n    <p>{`The connector trace should have something like:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-logs\"\n      }}>{`connector.class = com.ibm.eventstreams.connect.jdbcsink.JDBCSinkConnector\n    errors.log.enable = false\n    errors.log.include.messages = false\n    errors.retry.delay.max.ms = 60000\n    errors.retry.timeout = 0\n    errors.tolerance = none\n    header.converter = null\n    key.converter = null\n    name = jdbc-sink-connector\n    tasks.max = 1\n    transforms = []\n    value.converter = null\n\n`}</code></pre>\n    <h2>{`Generate some records`}</h2>\n    <p>{`The `}<inlineCode parentName=\"p\">{`integration-tests`}</inlineCode>{` folder includes a set of python code to load some records to the expected topic.`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Start a python environment with `}<inlineCode parentName=\"li\">{`./startPython.sh`}</inlineCode></li>\n      <li parentName=\"ol\">{`Within the bash, start python to execute the  `}<inlineCode parentName=\"li\">{`ProduceInventoryEvent.py`}</inlineCode>{` script, and specify the number of records to send via the —size argument.`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`python ProduceInventoryEvent.py --size 2\n`}</code></pre>\n    <ol>\n      <li parentName=\"ol\">{`The trace should have something like`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`Produce to the topic inventory\n[KafkaProducer] - This is the configuration for the producer:\n[KafkaProducer] - {'bootstrap.servers': 'broker-0-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093,broker-1-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093,broker-2-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093,broker-3-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093,broker-4-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093,broker-5-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093', 'group.id': 'ProducerInventory', 'acks': 0, 'request.timeout.ms': 10000, 'security.protocol': 'SASL_SSL', 'sasl.mechanisms': 'PLAIN', 'sasl.username': 'token', 'sasl.password': 'am_rbb9e794mMwhE-KGPYo0hhW3h91e28OhT8IlruFe5'}\nsending -> {'storeName': 'LA02', 'itemCode': 'IT09', 'id': 0, 'timestamp': 1591211295.617515}\n[KafkaProducer] - Message delivered to inventory [0]\nsending -> {'storeName': 'PT02', 'itemCode': 'IT00', 'id': 1, 'timestamp': 1591211296.7727954}\n[KafkaProducer] - Message delivered to inventory [0]\n\n`}</code></pre>\n    <h2>{`Verify records are uploaded into the Inventory database`}</h2>\n    <p>{`Using the DB2 console, use the `}<inlineCode parentName=\"p\">{`select * from inventory;`}</inlineCode>{` SQL query to get the last records.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}