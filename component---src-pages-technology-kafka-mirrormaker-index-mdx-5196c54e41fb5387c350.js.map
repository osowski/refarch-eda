{"version":3,"sources":["webpack:///./src/pages/technology/kafka-mirrormaker/index.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-technology-kafka-mirrormaker-index-mdx-5196c54e41fb5387c350.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/refarch-eda/refarch-eda/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`This section introduces `}<strong parentName=\"p\">{`Mirror Maker 2.0`}</strong>{`, the new replication feature of Kafka 2.4, and how it can be used, along with best practices, for data replication between two Kafka clusters. Mirror Maker 2.0 was defined as part of the Kafka Improvement Process - `}<a parentName=\"p\" {...{\n        \"href\": \"https://cwiki.apache.org/confluence/display/KAFKA/KIP-382%3A+MirrorMaker+2.0\"\n      }}>{`KIP 382`}</a>{`.`}</p>\n    <h2>{`General concepts`}</h2>\n    <p>{`As `}<a parentName=\"p\" {...{\n        \"href\": \"https://strimzi.io/docs/master/#con-configuring-mirror-maker-deployment-configuration-kafka-mirror-maker\"\n      }}>{`Mirror maker 2.0`}</a>{` is using Kafka Connect framework, we recommend to review our summary of Kafka Connect `}<a parentName=\"p\" {...{\n        \"href\": \"../kafka-connect/\"\n      }}>{`here`}</a>{`.`}</p>\n    <p>{`The figure below illustrates the MirrorMaker 2.0 internal components running within Kafka Connect.`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"662px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"39.583333333333336%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABjklEQVQoz22SS2/TQBSF/fNBILGqkBA7FgjEgl3VqmZRFxohUiq3inkkMYYEO45rZ+wQP8b2x8ykRllwpDOPOzP33MdYKHRdT9drgpr2s7I3TU25y6nKQq0bZKfOlL2SmLW+o9GrRwOtruuMUY+y7WnazrBV++3mB97HF/juS3VBUOUBvmcjYhdRbAnjhOQuRUpJ27aGVprl3E48wjA0UWgVKRsjIuuUdeSySW6NZLG+xr95RbZ0SNOEszPbvBugg7OqqmI6nRKtVux2JXVdG0WNPxtBMB4xGzlUIuPum8vN8WuW4wvSZI1t2wRBQFmWCCFMQBYH0Aqa/X0Z8nDBxfMnvDt6wPbXjNXnS06OHvH99C1ZkuA4DnEcm6z+RTgU8xDDfhf/5oNyeP70IU30k+jqPc6zx3w9foPIUsbjKzzPY7FYsFIZ6uysww4dUqMqcpbuJ6ajc9WIkHj2hej6kmzmIVQ5fN9nMpkwn8+JomjvkP+g34dpvo+pZS1JlYMsL5D35/qr6a5qJ0MzNf8CiV5c/93+qbMAAAAASUVORK5CYII=')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"Kafka Connect\",\n        \"title\": \"Kafka Connect\",\n        \"src\": \"/refarch-eda/static/f6dcdf7aeb09f297e5f953dfe6b42b30/7a604/mm-k-connect.png\",\n        \"srcSet\": [\"/refarch-eda/static/f6dcdf7aeb09f297e5f953dfe6b42b30/7fc1e/mm-k-connect.png 288w\", \"/refarch-eda/static/f6dcdf7aeb09f297e5f953dfe6b42b30/a5df1/mm-k-connect.png 576w\", \"/refarch-eda/static/f6dcdf7aeb09f297e5f953dfe6b42b30/7a604/mm-k-connect.png 662w\"],\n        \"sizes\": \"(max-width: 662px) 100vw, 662px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p>{`In distributed mode, MirrorMaker 2.0 creates the following topics on the target cluster:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`mm2-configs.source.internal: This topic is used to store the connector and task configuration.`}</li>\n      <li parentName=\"ul\">{`mm2-offsets.source.internal: This topic is used to store offsets for Kafka Connect.`}</li>\n      <li parentName=\"ul\">{`mm2-status.source.internal: This topic is used to store status updates of connectors and tasks.`}</li>\n      <li parentName=\"ul\">{`source.heartbeats`}</li>\n      <li parentName=\"ul\">{`source.checkpoints.internal`}</li>\n    </ul>\n    <p>{`A typical MirrorMaker 2.0 configuration is done via a property file and defines the replication source and target clusters with their connection properties and the replication flow definition. Here is a simple example for a local cluster replicating to a remote IBM Event Streams cluster using TLS v1.2 for connection encryption and SASL authentication protocol.  IBM Event Streams is a support, enterprise version of Apache Kafka by IBM.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-properties\"\n      }}>{`clusters=source, target\nsource.bootstrap.servers=\\${KAFKA_SOURCE_BROKERS}\ntarget.bootstrap.servers=\\${KAFKA_TARGET_BROKERS}\ntarget.security.protocol=SASL_SSL\ntarget.ssl.protocol=TLSv1.2\ntarget.ssl.endpoint.identification.algorithm=https\ntarget.sasl.mechanism=PLAIN\ntarget.sasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username=\"token\" password=\\${KAFKA_TARGET_APIKEY};\n# enable and configure individual replication flows\nsource->target.enabled=true\nsource->target.topics=products\ntasks.max=10\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`Topics are configured to be replicated or not using a `}<em parentName=\"li\">{`whitelist`}</em>{` and `}<em parentName=\"li\">{`blacklist`}</em>{` concept`}</li>\n      <li parentName=\"ul\">{`White listed topics are set with the `}<inlineCode parentName=\"li\">{`source->target.topics`}</inlineCode>{` attribute of the replication flow and uses `}<a parentName=\"li\" {...{\n          \"href\": \"https://www.vogella.com/tutorials/JavaRegularExpressions/article.html\"\n        }}>{`Java regular expression`}</a>{` syntax.`}</li>\n      <li parentName=\"ul\">{`Blacklisted topics: by default the following pattern is applied:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-properties\"\n      }}>{`blacklist = [follower\\\\.replication\\\\.throttled\\\\.replicas, leader\\\\.replication\\\\.throttled\\\\.replicas, message\\\\.timestamp\\\\.difference\\\\.max\\\\.ms, message\\\\.timestamp\\\\.type, unclean\\\\.leader\\\\.election\\\\.enable, min\\\\.insync\\\\.replicas]\n`}</code></pre>\n    <p>{`We can also define the `}<em parentName=\"p\">{`blacklist`}</em>{` with the properties: `}<inlineCode parentName=\"p\">{`topics.blacklist`}</inlineCode>{`. Comma-separated lists and Java Regular Expressions are supported.`}</p>\n    <p>{`Internally, `}<inlineCode parentName=\"p\">{`MirrorSourceConnector`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`MirrorCheckpointConnector`}</inlineCode>{` will create multiple Kafka tasks (up to the value of `}<inlineCode parentName=\"p\">{`tasks.max`}</inlineCode>{` property), and `}<inlineCode parentName=\"p\">{`MirrorHeartbeatConnector`}</inlineCode>{` creates an additional task. `}<inlineCode parentName=\"p\">{`MirrorSourceConnector`}</inlineCode>{` will have one task per topic-partition combination to replicate, while `}<inlineCode parentName=\"p\">{`MirrorCheckpointConnector`}</inlineCode>{` will have one task per consumer group. The Kafka Connect framework uses the coordinator API, with the `}<inlineCode parentName=\"p\">{`assign()`}</inlineCode>{` API, so there is no consumer group used while fetching data from source topics. There is no call to `}<inlineCode parentName=\"p\">{`commit()`}</inlineCode>{` either; rebalancing occurs only when there is a new topic created that matches the `}<em parentName=\"p\">{`whitelist`}</em>{` pattern.`}</p>\n    <h2>{`Scenarios`}</h2>\n    <p>{`The following table summarizes the different scenarios we have tested for data replication using both the Strimzi Operator and IBM Event Streams:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Environment`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Source`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Target`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Connect`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`1`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Local`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Event Streams on Cloud`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Local`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`2`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Strimzi on OCP`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Event Streams on Cloud`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`OCP / ROKS`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`3`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Event Streams on Cloud`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Local`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Local`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`4`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Event Streams on Cloud`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Strimzi on OCP`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`OCP / ROKS`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`5`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Event Streams on OCP`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Event Streams on Cloud`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`OCP / ROKS`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`*`}{`The connect column defines where the MirrorMaker 2 connect to.`}</p>\n    <h2>{`Where to go next`}</h2>\n    <p>{`You can read more about how to configure the different scenarios above, how they work, how to apply security in data replication, how to monitor Mirror Maker and much more detailed information on data replication `}<a parentName=\"p\" {...{\n        \"href\": \"https://ibm-cloud-architecture.github.io/refarch-eda-data-consistency/\"\n      }}><strong parentName=\"a\">{`here`}</strong></a></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}