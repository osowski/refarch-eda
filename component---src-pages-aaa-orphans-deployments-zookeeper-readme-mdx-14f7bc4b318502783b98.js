(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{s4M9:function(e,n,o){"use strict";o.r(n),o.d(n,"_frontmatter",(function(){return i})),o.d(n,"default",(function(){return c}));var t=o("wx14"),r=o("zLVn"),a=(o("q1tI"),o("7ljp")),s=o("013z"),i=(o("qKvR"),{}),l={_frontmatter:i},p=s.a;function c(e){var n=e.components,o=Object(r.a)(e,["components"]);return Object(a.b)(p,Object(t.a)({},l,o,{components:n,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Development deployment uses one zookeeper server. For production the replicas is set to 5 to tolerate one planned and one unplanned failure. The service defines 3 ports: one for the inter-server communication, one for client access and one for leader-election.\nPersistence volumes are needed to provide durable storage. Better to use network storage like NFS or glusterfs."),Object(a.b)("p",null,"The zookeeper manifests are defined in this project under the ",Object(a.b)("inlineCode",{parentName:"p"},"deployments/zookeeper/dev")," folder. We are using our own docker images and the Dockerfile to build this image is in ",Object(a.b)("inlineCode",{parentName:"p"},"deployments/zookeeper"),". The image is already pushed to the Docker Hub under ibmcase account."),Object(a.b)("p",null,"We are providing a script to install zookeeper as a kubernetes environment. First be sure to be connected to your kubernetes cluster then run the following command:"),Object(a.b)("pre",null,Object(a.b)("code",Object(t.a)({parentName:"pre"},{}),"$ pwd\n> refarch-eda/deployments/zookeeper\n$ ./deployZoopeeker.sh\n\n$ kubectl get pods -n greencompute\nNAME                            READY     STATUS    RESTARTS   AGE\ngc-zookeeper-57dc5679bb-bh29q   1/1       Running   0          1m\n")),Object(a.b)("p",null,"It creates volume, services and deployment or statefulset."),Object(a.b)("p",null,"If you want to deploy it in more resilient deployment we provide other manifests under the prod folder. To install:"),Object(a.b)("pre",null,Object(a.b)("code",Object(t.a)({parentName:"pre"},{}),"$ ./deployZoopeeker.sh prod\n")),Object(a.b)("p",null,"Once installed you do not need to reinstall it."),Object(a.b)("p",null,"We are also delivering a script to remove zookeeper when you are done using it. (./removeZookeeper.sh)"),Object(a.b)("p",null," When running in production it is better to use separate zookeeper ensemble for each ",Object(a.b)("strong",{parentName:"p"},"Kafka")," cluster. Each server should have at least 2 GiB of heap with at least 4 GiB of reserved memory"))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-aaa-orphans-deployments-zookeeper-readme-mdx-14f7bc4b318502783b98.js.map