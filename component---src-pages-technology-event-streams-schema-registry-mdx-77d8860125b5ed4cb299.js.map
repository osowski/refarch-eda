{"version":3,"sources":["webpack:///./src/pages/technology/event-streams/schema-registry.mdx"],"names":["_frontmatter","makeShortcode","name","props","console","warn","AnchorLinks","AnchorLink","InlineNotification","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","kind","isMDXComponent"],"mappings":"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","file":"component---src-pages-technology-event-streams-schema-registry-mdx-77d8860125b5ed4cb299.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/refarch-eda/refarch-eda/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst InlineNotification = makeShortcode(\"InlineNotification\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`This documentation aims to be a introductory hands-on lab on IBM Event Streams on IBM Cloud Schema Registry where we will go through the different capabilities of the Schema Registry that is available for IBM Event Streams on IBM Cloud users.`}</p>\n    <p>{`We strongly recommend to complete first the `}<strong parentName=\"p\">{`IBM Event Streams on IBM Cloud lab`}</strong>{` you can find `}<a parentName=\"p\" {...{\n        \"href\": \"es-cloud/\"\n      }}>{`here`}</a>{`.`}</p>\n    <h2>{`Index`}</h2>\n    <AnchorLinks mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">Requirements</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">IBM Event Streams Service Credentials</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Kafdrop</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Python Demo Environment</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Schema Registry</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Schemas</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Python Avro Producer</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Python Avro Consumer</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Schemas and Messages</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Data Evolution</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Security</AnchorLink>\n    </AnchorLinks>\n    <h2>{`Requirements`}</h2>\n    <p>{`This lab requires the following components to work against:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`An IBM Cloud account.`}</li>\n      <li parentName=\"ol\">{`An IBM Event Streams instance with the Enterprise plan (Schema Registry is only available to these instance for now) - `}<a parentName=\"li\" {...{\n          \"href\": \"https://cloud.ibm.com/docs/EventStreams?topic=eventstreams-getting_started\"\n        }}>{`https://cloud.ibm.com/docs/EventStreams?topic=eventstreams-getting_started`}</a></li>\n    </ol>\n    <p>{`On your development workstation you will need:`}</p>\n    <ol>\n      <li parentName=\"ol\"><em parentName=\"li\">{`(optional)`}</em>{` IBM Cloud CLI - `}<a parentName=\"li\" {...{\n          \"href\": \"https://cloud.ibm.com/docs/cli?topic=cloud-cli-getting-started\"\n        }}>{`https://cloud.ibm.com/docs/cli?topic=cloud-cli-getting-started`}</a></li>\n      <li parentName=\"ol\"><em parentName=\"li\">{`(optional)`}</em>{` IBM CLoud CLI Event Streams plugin - `}<a parentName=\"li\" {...{\n          \"href\": \"https://cloud.ibm.com/docs/EventStreams?topic=eventstreams-cli#step5_es_cli\"\n        }}>{`https://cloud.ibm.com/docs/EventStreams?topic=eventstreams-cli#step5_es_cli`}</a></li>\n      <li parentName=\"ol\">{`Docker - `}<a parentName=\"li\" {...{\n          \"href\": \"https://docs.docker.com/get-docker/\"\n        }}>{`https://docs.docker.com/get-docker/`}</a></li>\n      <li parentName=\"ol\">{`Kafdrop - `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/obsidiandynamics/kafdrop\"\n        }}>{`https://github.com/obsidiandynamics/kafdrop`}</a></li>\n    </ol>\n    <h2>{`IBM Event Streams Service Credentials`}</h2>\n    <p>{`At this point, we want to create the needed service credentials in order to allow other applications, tools, scripts to interact with our IBM Event Streams instance. For doing so, we need to:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`In your IBM Event Streams instance service page, click on `}<em parentName=\"p\">{`Service credentials`}</em>{` on the left hand side menu:`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"55.55555555555556%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABGElEQVQoz7VQ/U6DMBzskztWwBZfy0cwZjH+sxCnNXFN+C5t4WwZCCNbZky85Chcr9fjR7Y0wt0mQBAEYDxBzB4QxRzxPQNnDGwk5wxJwhGGISilP4yiyJ2l2DgGWwpS1w3KooCxBh79yL+C7Hc7fLy+QB4ljDHoOovOhVtr3bcdNP/+9akhDhpa2+Fyr0+09nSuaWqQPMuQ5xnKsnRih97V691j4tDaLfKoIN4VVDP+ycIz+bTWID6ocJwCl2YPr1VVhcNbijRNIYSAUmpx2ext2xakcPPzvBR4Mvaolcbjk8DzXqKs1TCCYX8VKKUcG14IPF+BvDZoWnumrX2++dXAtXnG3HztnWd4s2F/lUvfzcDf4l8DvwF0SUYYaRQwMwAAAABJRU5ErkJggg==')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"8\",\n            \"title\": \"8\",\n            \"src\": \"/refarch-eda/static/65e6e9e0c2e4d6a4df1ba26a2fc0d021/3cbba/8.png\",\n            \"srcSet\": [\"/refarch-eda/static/65e6e9e0c2e4d6a4df1ba26a2fc0d021/7fc1e/8.png 288w\", \"/refarch-eda/static/65e6e9e0c2e4d6a4df1ba26a2fc0d021/a5df1/8.png 576w\", \"/refarch-eda/static/65e6e9e0c2e4d6a4df1ba26a2fc0d021/3cbba/8.png 1152w\", \"/refarch-eda/static/65e6e9e0c2e4d6a4df1ba26a2fc0d021/0b124/8.png 1728w\", \"/refarch-eda/static/65e6e9e0c2e4d6a4df1ba26a2fc0d021/4ea69/8.png 2304w\", \"/refarch-eda/static/65e6e9e0c2e4d6a4df1ba26a2fc0d021/5aa31/8.png 3840w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Observe, there is no service credentials yet and click on the `}<em parentName=\"p\">{`New credential`}</em>{` button on the top right corner:`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"38.888888888888886%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABBklEQVQoz52Rz06EMBCH+9yyCgSBxNfwGUw8ePG4N99AY3ZXw9IWKLBACz87aI2Ih41NvnQ6nXzTP+zKD+BtLuF5HpI0tdwguk4tMZIkRhwnX9A6QRRF8H0fQRDMhGFo5xAXG/IEYKeuQ9000HqAalvwsoM6Ab3BvwZ7fnnFfreDEAJZluFw2CPnAlKKOefI89zmJJRSqKrqBwp1KXH/+Ibbu3cwKnKFRVHMMRWWZbmAcz7v/c4XlqqQ2D5leNgewZqmRl1/orWGGafVNaZpWsRrvnfB6GQECfu+t10rtPYtKSaoyd+StXQYNBiJnNAYY5PDDImc7NwxjuNS2Nkfd0KHO+m5fAAsRVKXEvcTNwAAAABJRU5ErkJggg==')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"9\",\n            \"title\": \"9\",\n            \"src\": \"/refarch-eda/static/53e4643ecb9b674fd1b86603820a8aa8/3cbba/9.png\",\n            \"srcSet\": [\"/refarch-eda/static/53e4643ecb9b674fd1b86603820a8aa8/7fc1e/9.png 288w\", \"/refarch-eda/static/53e4643ecb9b674fd1b86603820a8aa8/a5df1/9.png 576w\", \"/refarch-eda/static/53e4643ecb9b674fd1b86603820a8aa8/3cbba/9.png 1152w\", \"/refarch-eda/static/53e4643ecb9b674fd1b86603820a8aa8/0b124/9.png 1728w\", \"/refarch-eda/static/53e4643ecb9b674fd1b86603820a8aa8/4ea69/9.png 2304w\", \"/refarch-eda/static/53e4643ecb9b674fd1b86603820a8aa8/5aa31/9.png 3840w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Enter a name for your service, choose `}<em parentName=\"p\">{`Manager`}</em>{` role for now and click on `}<em parentName=\"p\">{`Add`}</em>{`:`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"41.31944444444445%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzElEQVQoz6XO3wqCMBQG8D1E1z1HkeKd9CDVY2eoRbapM+cfdO7ruAgkKLAO+/HBLr5zmBACWZaBc448z6G1/lnbtmBjSVmWUErZj7kl0zHGgEkpkaapva6u61maprElr7JxWFFIVJWibT36vkPXzTMttBeKVOJy5ZCFQnGvqPyTeqKxqYgeDOhhGJOw0w04CsKf/h0WBCeEUYwwjGzG8bsIUXxGkGgcE1qamK+Y7/vwPA+Os4HrOJRTLtzNCmtvi+Uhw2IPLHYDMR89AJimSax40U96AAAAAElFTkSuQmCC')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"10\",\n            \"title\": \"10\",\n            \"src\": \"/refarch-eda/static/675b6ce2ce7e10bd178b68d0e8efeafa/3cbba/10.png\",\n            \"srcSet\": [\"/refarch-eda/static/675b6ce2ce7e10bd178b68d0e8efeafa/7fc1e/10.png 288w\", \"/refarch-eda/static/675b6ce2ce7e10bd178b68d0e8efeafa/a5df1/10.png 576w\", \"/refarch-eda/static/675b6ce2ce7e10bd178b68d0e8efeafa/3cbba/10.png 1152w\", \"/refarch-eda/static/675b6ce2ce7e10bd178b68d0e8efeafa/0b124/10.png 1728w\", \"/refarch-eda/static/675b6ce2ce7e10bd178b68d0e8efeafa/84ddc/10.png 1850w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`You should now see your new service credential and be able to inspect its details if you click on its dropdown arrow on it left:`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"41.66666666666667%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABO0lEQVQoz52SuXKDQBBE+f/Mn+LUoXMHDmw5sAQlIcS1wJ5aznZDYSQrNFWvZhZmeo4l8L6FtRbD0EO7K2rdwXXAMOFfTxBGR5zPMaqqQpaliOMTylLwLCDEjfm7lBJKqTurYI3CPpZ4elZ4eZMImqZZAjQDqqJAyWSlNYx1xEIbw0LZJviIVhJpIfH6XmMXUdAwYYHJrdEQ7Db82pFPHHYfSKMQXdfBty3GcdxGm6aZie/udjO2CDS7mbHOwbLLc3hAQpHT/hsJ/fx0RFMWUHUF09SMkbCygbdmKdSy0LAWEpxi6fBX0GuFIr0gT1NktGmS0L+gzDPUokRF4XktmqNO/jr3+edCvPc3wXnkK33Fy6iLHFWeQ3B3kkKdsytuo+e57/uNYRhugpso7fwLLeMTt9ptz3foNeeRHxhZZbWNiizoAAAAAElFTkSuQmCC')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"11\",\n            \"title\": \"11\",\n            \"src\": \"/refarch-eda/static/c8d8e29fb0be983dd5255d1f2c95a252/3cbba/11.png\",\n            \"srcSet\": [\"/refarch-eda/static/c8d8e29fb0be983dd5255d1f2c95a252/7fc1e/11.png 288w\", \"/refarch-eda/static/c8d8e29fb0be983dd5255d1f2c95a252/a5df1/11.png 576w\", \"/refarch-eda/static/c8d8e29fb0be983dd5255d1f2c95a252/3cbba/11.png 1152w\", \"/refarch-eda/static/c8d8e29fb0be983dd5255d1f2c95a252/0b124/11.png 1728w\", \"/refarch-eda/static/c8d8e29fb0be983dd5255d1f2c95a252/4ea69/11.png 2304w\", \"/refarch-eda/static/c8d8e29fb0be983dd5255d1f2c95a252/5aa31/11.png 3840w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`We could have created the service credentials using the CLI as well but we leave that as extra homework for students to try on their own. However, we can explore the service credentials using the CLI with `}<inlineCode parentName=\"p\">{`ibmcloud resource service-key <service_credentials_name>`}</inlineCode>{`:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ ibmcloud resource service-key demo-serv-cred\nRetrieving service key demo-serv-cred in all resource groups under account Kedar Kulkarni's Account as ALMARAZJ@ie.ibm.com...\n\nName:          demo-serv-cred\nID:            crn:v1:bluemix:public:messagehub:eu-de:a/b636d1d83e34d7ae7e904591ac248cfa:b05be932-2a60-4315-951d-a6dd902e687a:resource-key:4ba348d2-5fcf-4c13-a265-360e983d99c5\nCreated At:    Tue May 12 10:53:02 UTC 2020\nState:         active\nCredentials:\n            api_key:                  *****\n            apikey:                   *****\n            iam_apikey_description:   Auto-generated for key 4ba348d2-5fcf-4c13-a265-360e983d99c5\n            iam_apikey_name:          demo-serv-cred\n            iam_role_crn:             crn:v1:bluemix:public:iam::::serviceRole:Manager\n            iam_serviceid_crn:        crn:v1:bluemix:public:iam-identity::a/b636d1d83e34d7ae7e904591ac248cfa::serviceid:ServiceId-380e866c-5914-4e01-85c4-d80bd1b8a899\n            instance_id:              b05be932-2a60-4315-951d-a6dd902e687a\n            kafka_admin_url:          https://mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud\n            kafka_brokers_sasl:       [kafka-2.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093 kafka-0.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093 kafka-1.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093]\n            kafka_http_url:           https://mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud\n            password:                 *****\n            user:                     token\n`}</code></pre>\n      </li>\n    </ol>\n    <InlineNotification kind=\"warning\" mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`IMPORTANT:`}</strong>{` Out of number `}<strong parentName=\"p\">{`4`}</strong>{` above, we are going to define the following important environment variables that will be used throughout this lab so please make sure you understand and define these properly`}</p>\n    </InlineNotification>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`KAFKA_BROKERS`}</strong>{` which should take the value of `}<strong parentName=\"p\">{`kafka_brokers_sasl`}</strong>{` comma separated:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`export KAFKA_BROKERS=kafka-2.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093,kafka-1.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093,kafka-0.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`KAFKA_APIKEY`}</strong>{` which should take the value of `}<strong parentName=\"p\">{`apikey`}</strong>{`:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`export KAFKA_APIKEY=*****\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`URL`}</strong>{` which should take the value of `}<strong parentName=\"p\">{`kafka_http_url`}</strong>{`:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`export URL=https://mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`SCHEMA_REGISTRY_URL`}</strong>{` which should be a combination of the three before in the form of:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`https://token:<apikey>@<kafka_http_url>/confluent`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`export SCHEMA_REGISTRY_URL=https://token:*****@mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud/confluent\n`}</code></pre>\n      </li>\n    </ol>\n    <InlineNotification kind=\"info\" mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`INFO:`}</strong>{` The reason for this “weird” schema registry url configuration is because we are using the Confluent SerDes as we will see in the `}<a parentName=\"p\" {...{\n          \"href\": \"#python-avro-producer\"\n        }}>{`Python Avro Producer`}</a>{` and `}<a parentName=\"p\" {...{\n          \"href\": \"#python-avro-consumer\"\n        }}>{`Python Avro Consumer`}</a>{` sections later on. Otherwise, the schema registry url would simply be the same as the `}<strong parentName=\"p\">{`kafka_http_url`}</strong>{` in your service credentials.`}</p>\n    </InlineNotification>\n    <h2>{`Kafdrop`}</h2>\n    <p>{`Kafdrop is a web UI for viewing Kafka topics and browsing consumer groups. The tool displays information such as brokers, topics, partitions, consumers, and lets you view messages: `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/obsidiandynamics/kafdrop\"\n      }}>{`https://github.com/obsidiandynamics/kafdrop`}</a></p>\n    <p>{`Kafdrop runs as a Docker container in your wokstation and in order to run it,`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Set the `}<strong parentName=\"p\">{`password`}</strong>{` value for the `}<strong parentName=\"p\">{`sasl.jaas.config`}</strong>{` property in the `}<a parentName=\"p\" {...{\n            \"href\": \"kafka.properties\"\n          }}>{`kafka.properties`}</a>{` file you can find in this repo. The value for password is the `}<em parentName=\"p\">{`api_key/password`}</em>{` attributes of your service credentials. If you don’t remember how to get this, review that section `}<a parentName=\"p\" {...{\n            \"href\": \"#api-key\"\n          }}>{`here`}</a></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-properties\"\n          }}>{`security.protocol=SASL_SSL\nssl.protocol=TLSv1.2\nssl.enabled.protocols=TLSv1.2\nssl.endpoint.identification.algorithm=HTTPS\nsasl.mechanism=PLAIN\nsasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username=\"token\" password=\"<YOUR_PASSWORD/API_KEY_HERE>\";\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Run the Kafdrop Docker container by executing:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ docker run -d --rm -p 9000:9000 \\\\\n    -e KAFKA_BROKERCONNECT=$KAFKA_BROKERS \\\\\n    -e KAFKA_PROPERTIES=$(cat kafka.properties | base64) \\\\\n    -e JVM_OPTS=\"-Xms32M -Xmx64M\" \\\\\n    -e SERVER_SERVLET_CONTEXTPATH=\"/\" \\\\\n    obsidiandynamics/kafdrop\n`}</code></pre>\n        <p parentName=\"li\">{`(`}{`*`}{`) After running the above command, you can use the docker container id returned on the screen to debug any possible issue with `}<inlineCode parentName=\"p\">{`docker logs -f <container_id>`}</inlineCode>{`. This container id will be used to stop the Kafdrop container once we have finished.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`You can point your browser to `}<a parentName=\"p\" {...{\n            \"href\": \"http://localhost:9000/\"\n          }}>{`http://localhost:9000/`}</a>{` to access the Kafdrop application:`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"109.72222222222223%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAACdUlEQVQ4y6VUWbLaQAz0RbA94wXwDmYH+1FQwGdOkRPk/qV0DxZFqJB6L+9DJXms6WmtnlmtxKaF2FEgNvDFhqFYa78mxoiZZmLiRLzRj58S978kzArx53MJx2MJAWrg9Bkw+hkD/ygSg28vqrZStVeJ93uxZ+jVWtI4logOA+gr+B3kLkmSyBgkKGmairdoG+m7nXS7nRwQfg/gruskz3N3OQb4qxBEhSDUBCcJr6wqqapalsulXG83uQ1yuVzker3K+Xx2cjqdnD4ej7LHo33fu4epdyAzR7rI0qOxWCxkMpnIbDaTuq6dVHhIbYr+m06njomyVZtMqT06NU3jwmMx3kkQBH8US3P4antk0ratY8hc8JCv/kteK61nLocMmTnQKn22Xf7WPg+GzM//Ar0y9Zi/9Xr9COc7wA6Q7Fh6zd/np+OpIEPhXMgLFGS73bqiaBXfiTa6NjUZ8d4ErcR24pk3xkQUZSllUbiisDjO6Un0jACMiENAYbr6jw/ZIEKeZ1kmXlCUMsPPHl3fDcKfdKZ+tsmAlwo8Ts0HOKIk4vv+PeQwy6VB2IfDwYFRs9l5qSRziNoEJFOCUROANiN4FGUEwKJuZIvFcMCMck45iuxPSgub7Nj8vEgAfYQgtJm/x3KocWm12UgNZg1AyU43iJtXOCXDzFpr3JnVaTHD91BtB7gBSAcwHxsnYOLxk4CseJZNpQQzi0uzBosBj0Ww52A8B/OEeYQ/IyFTl0MDhwAfUV5IPLSFNjjDS/FIDLYMOx42CkMcM4fcMvjH8LWNvIisKPH9IHpaDtrs1MXAQNeW9qW22iPk3FWyct3+buC/Ir8B+1iFSpgOEyEAAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"18\",\n            \"title\": \"18\",\n            \"src\": \"/refarch-eda/static/1c74ac7b2cd7c30bcd8895c4d48eebd0/3cbba/18.png\",\n            \"srcSet\": [\"/refarch-eda/static/1c74ac7b2cd7c30bcd8895c4d48eebd0/7fc1e/18.png 288w\", \"/refarch-eda/static/1c74ac7b2cd7c30bcd8895c4d48eebd0/a5df1/18.png 576w\", \"/refarch-eda/static/1c74ac7b2cd7c30bcd8895c4d48eebd0/3cbba/18.png 1152w\", \"/refarch-eda/static/1c74ac7b2cd7c30bcd8895c4d48eebd0/0b124/18.png 1728w\", \"/refarch-eda/static/1c74ac7b2cd7c30bcd8895c4d48eebd0/d890f/18.png 1852w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`You can see the topic details by clicking on the name of that topic:`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"63.541666666666664%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABW0lEQVQ4y5VTy3KDMAz0hySATR4QwiOhkIQMTOixH9bf3nrVEUNaDslhB1uytKu1MXHVI145uGAFF4Zw1sI59zr8eRvHsIeDrI37+oZNK6zvd4SnGtYfsjz0Dliz2cjalKdPJE2LqLsjqj/gfOIthRN+JzPjY0Dv1WW7Hex6/VJxFEUCu2CPqfyYeVEipuQXxmXRfr9HkiTYbrdTY4Xp+x7H41E2sTd3SdE8vvHEXddhGAbkeS65ed5cr1ecz2dh0uI5GMuyTBRpvmka1HWNIAiktm3bKWcYIMqyFPYlhRxRcyziqLrnd+f9nxSS7eDfUJqm/9QpWDDf66W4Bc9l5MvlgqIonm6NazWcKnR8JaBq5kL+DLPGhvOzKQ1mAx2HvpGEhaqKBcyP4yg+8jJp1dOzYbCqKkmwAQ9S8e12ky+heZKqShKQmIRPDSmfrAo9pL5pTN+djvfXFsUPIfZ2V7WYv2MAAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"19\",\n            \"title\": \"19\",\n            \"src\": \"/refarch-eda/static/1fc6ee21386bb8008e614a44682fe4fb/3cbba/19.png\",\n            \"srcSet\": [\"/refarch-eda/static/1fc6ee21386bb8008e614a44682fe4fb/7fc1e/19.png 288w\", \"/refarch-eda/static/1fc6ee21386bb8008e614a44682fe4fb/a5df1/19.png 576w\", \"/refarch-eda/static/1fc6ee21386bb8008e614a44682fe4fb/3cbba/19.png 1152w\", \"/refarch-eda/static/1fc6ee21386bb8008e614a44682fe4fb/0b124/19.png 1728w\", \"/refarch-eda/static/1fc6ee21386bb8008e614a44682fe4fb/43642/19.png 1838w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`You can watch the messages on this topic by clicking on `}<em parentName=\"p\">{`View Messages`}</em>{` button under the topic name and configuring the partition, offset and number of messages option that you are presented with in the next screen. Finally, click on `}<em parentName=\"p\">{`View Messages`}</em>{` button at the right:`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"39.23611111111111%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABmElEQVQoz42SzW7aQBRG/Q4Y4xgweGzAFuDGmLoiDpUQOKWhErTBEkpKqi7bRdUu+gKom0RKN9C87umMG6QuszhzRzN3vvs3mpMt8JoRwq5JbESziSMEjuM8D+lbvPEDnFYbrXZzTztcUx29pD46xwmCwkEox+eihD0P4bpoQT8hDBPaZyP8dIwYxHitFq68VHjS8cj/Z8oqAfEkdBTXLrIZWZaxmL9lNplQOx2g1+vYkrqkUqlgGAamadJoNLBlW9SZZVkI6wTHNHCqFk1ZlUI7jQZcLt4xyy7Y3n5ie31NfnVFHMe8ShLyPGez2bBarej3+0RRRL5e82Y+R2SXuO83eJOMwPfpdDpo8XDIrRT6IEUeHn7z5/GRw+HAcrnk43bLfr8v2O12pGnKdDrl/u6Ob99/4H75if9rT+fzV8Jej55Ei0ZnpOPXpOdjXshsj/1R2cTDpCijVCpRLpeLvSpZ1/WiBa5lIgwdUT0p+qemrqlFPe52u/gybWXDMCwuGw1bigtackgq0LHx/4J6ODKwmm5hn77RX5il+mSb+tpVAAAAAElFTkSuQmCC')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"20\",\n            \"title\": \"20\",\n            \"src\": \"/refarch-eda/static/735bd29cbc14995e8c3ac24ca67b9095/3cbba/20.png\",\n            \"srcSet\": [\"/refarch-eda/static/735bd29cbc14995e8c3ac24ca67b9095/7fc1e/20.png 288w\", \"/refarch-eda/static/735bd29cbc14995e8c3ac24ca67b9095/a5df1/20.png 576w\", \"/refarch-eda/static/735bd29cbc14995e8c3ac24ca67b9095/3cbba/20.png 1152w\", \"/refarch-eda/static/735bd29cbc14995e8c3ac24ca67b9095/0b124/20.png 1728w\", \"/refarch-eda/static/735bd29cbc14995e8c3ac24ca67b9095/0d8d1/20.png 1846w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`To stop the Kafdrop container once you have finsihed the tutorial, simply list the containers running on your workstation, find the container id for your Kafdrop container and stop it:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ docker ps\nCONTAINER ID        IMAGE                                       COMMAND             CREATED             STATUS              PORTS                    NAMES\nba6c8eaf6a3a        ibmcase/python-schema-registry-lab:latest   \"bash\"              31 seconds ago      Up 30 seconds                                keen_neumann\nbab9cae43f15        obsidiandynamics/kafdrop                    \"/kafdrop.sh\"       17 minutes ago      Up 17 minutes       0.0.0.0:9000->9000/tcp   laughing_dirac\n\n$ docker stop bab9cae43f15\nbab9cae43f15\n`}</code></pre>\n      </li>\n    </ol>\n    <h2>{`Python Demo Environment`}</h2>\n    <p>{`Given that students’ workstations may vary quite a lot, not only on their operating system but also on the tools installed on them and the tools we need for our lab might install differently, we have opted to provide a python demo environment in the form of a Docker container where all the libraries and tools needed are already pre-installed.`}</p>\n    <h3>{`Clone`}</h3>\n    <p>{`In order to build our python demo environment we first need to clone the github repository where the assets live. This github repository is `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/refarch-eda-tools\"\n      }}>{`https://github.com/ibm-cloud-architecture/refarch-eda-tools`}</a>{` and the specific assets we refer to can be found under the `}<inlineCode parentName=\"p\">{`labs/es-cloud-schema-lab`}</inlineCode>{` folder:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Clone the github repository on your workstation on the location of your choice:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ git clone https://github.com/ibm-cloud-architecture/refarch-eda-tools.git\nCloning into 'refarch-eda-tools'...\nremote: Enumerating objects: 185, done.\nremote: Counting objects: 100% (185/185), done.\nremote: Compressing objects: 100% (148/148), done.\nremote: Total 185 (delta 23), reused 176 (delta 16), pack-reused 0\nReceiving objects: 100% (185/185), 6.17 MiB | 4.61 MiB/s, done.\nResolving deltas: 100% (23/23), done.\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Change directory into `}<inlineCode parentName=\"p\">{`refarch-eda-tools/labs/es-cloud-schema-lab`}</inlineCode>{` to find the assets we will we working from now on for the python demo environment and few other scripts/applications:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ cd refarch-eda-tools/labs/es-cloud-schema-lab \n\n$ ls -all\ntotal 240\ndrwxr-xr-x   9 user  staff     288 20 May 19:33 .\ndrwxr-xr-x   3 user  staff      96 20 May 19:33 ..\n-rw-r--r--   1 user  staff    1012 20 May 19:33 Dockerfile\n-rw-r--r--   1 user  staff  112578 20 May 19:33 README.md\ndrwxr-xr-x   5 user  staff     160 20 May 19:33 avro_files\ndrwxr-xr-x  27 user  staff     864 20 May 19:33 images\ndrwxr-xr-x   6 user  staff     192 20 May 19:33 kafka\n-rw-r--r--   1 user  staff     286 20 May 19:33 kafka.properties\ndrwxr-xr-x   6 user  staff     192 20 May 19:33 src\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Build`}</h3>\n    <p>{`This Docker container can be built by using the `}<a parentName=\"p\" {...{\n        \"href\": \"Dockerfile\"\n      }}>{`Dockerfile`}</a>{` provided within this github repository.`}</p>\n    <p>{`To build your python demo environment Docker container, execute the following on your workstation:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`docker build -t \"ibmcase/python-schema-registry-lab:latest\" .\n`}</code></pre>\n    <InlineNotification kind=\"warning\" mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`WARNING:`}</strong></p>\n      <ul>\n        <li parentName=\"ul\">{`Mind the `}<strong parentName=\"li\">{`dot`}</strong>{` at the end of the command.`}</li>\n        <li parentName=\"ul\">{`Be consistent throughout the lab with the name you give to the Docker container.`}</li>\n      </ul>\n    </InlineNotification>\n    <h3>{`Run`}</h3>\n    <p>{`In order to run the python demo environment Docker container, execute the following on your workstation:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Make sure you have declared your `}<inlineCode parentName=\"p\">{`KAFKA_BROKERS`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`KAFKA_APIKEY`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`SCHEMA_REGISTRY_URL`}</inlineCode>{` environment variables as explain in the `}<a parentName=\"p\" {...{\n            \"href\": \"#ibm-event-streams-service-credentials\"\n          }}>{`IBM Event Streams Service Credentials`}</a>{` section.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Run the python demo environment container`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ docker run -e KAFKA_BROKERS=$KAFKA_BROKERS \\\\\n             -e KAFKA_APIKEY=$KAFKA_APIKEY \\\\\n             -e SCHEMA_REGISTRY_URL=$SCHEMA_REGISTRY_URL \\\\\n             -v \\${PWD}:/tmp/lab \\\\\n             --rm \\\\\n             -ti ibmcase/python-schema-registry-lab:latest bash\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Go to `}<inlineCode parentName=\"p\">{`/tmp/lab`}</inlineCode>{` to find all the assets you will need to complete this lab.`}</p>\n      </li>\n    </ol>\n    <InlineNotification kind=\"info\" mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`INFO:`}</strong>{` we have mounted this working directory into the container so any changes to any of the files apply within the container. This is good as we do not need to restart the python demo environment Docker container if we want to do any changes to the files.`}</p>\n    </InlineNotification>\n    <h3>{`Exit`}</h3>\n    <p>{`Once you are done with the python demo environment container, just execute `}<inlineCode parentName=\"p\">{`exit`}</inlineCode>{` and you will get out of the container and the container will automatically be removed from your system.`}</p>\n    <h2>{`Schema Registry`}</h2>\n    <InlineNotification kind=\"info\" mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`INFO:`}</strong>{` The following documentation about the IBM Event Streams on IBM Cloud Schema registry until the end of this lab is based on the Schema Registry status as of mid May 2020 when this tutorial was developed`}</p>\n    </InlineNotification>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"45.48611111111111%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABzklEQVQoz1WSbW7TQBCGfUQuwQU4BwcAhMSHKAIhAQFEqwISf4AiaAsEQZq0TZO21Gma2s7GjvfzYWyH0K409tq7+84z72zUji2rvyV+GT4NDdUIIcjT4+v35dGsNXFxPSzm0fsDy+3NwJ2twPMdx7wwjCclh8eOSWJRuSGfWea5xRlPNi3ZHxh2+4ZE5kY7rPVNChGNPh9rHrZT7n4941WnqBeVCAzl/+iskG1WQsi1xhpHWRoy5UhSh5Hvmk4SLTiJRqen9AcDjmIlZPNFOZCqKb0TxfUPgatPNY+2Gzuc88sylQhNckmcFCRzS6UbGaMFW+P8RT/EQSflm8C1VsqVe1MefHN1Ml1RyQbjAq/3DPd/TFlpZ6z8LBhmQlgJFKUjHmuSzDQHqqPe10HQTcnSpIrO+4ZQi2Cr57mx4bj50XHri6Wf+UZQieFHJ5rxuVmWVBkcLnX3fzRuBbrjgs2BYmNPsXWYkxSO6F+7K7IQPCNledJWrA9g/SDwcqfkRWfOWt/zdgirfeiee2YzTRzLDRAPyyLHlnlt01Kw8tALXZyWPJaOr+8WvOnltL5PeLY9Zq2jeLcvwt1cyEqmyvBnVF0dI+I5aZpJ1w1/AQ/4rCucQEZwAAAAAElFTkSuQmCC')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"diagram\",\n        \"title\": \"diagram\",\n        \"src\": \"/refarch-eda/static/bbe2999dae1d8696a725a87b684a83e4/3cbba/EDA-avro-schema-registry.png\",\n        \"srcSet\": [\"/refarch-eda/static/bbe2999dae1d8696a725a87b684a83e4/7fc1e/EDA-avro-schema-registry.png 288w\", \"/refarch-eda/static/bbe2999dae1d8696a725a87b684a83e4/a5df1/EDA-avro-schema-registry.png 576w\", \"/refarch-eda/static/bbe2999dae1d8696a725a87b684a83e4/3cbba/EDA-avro-schema-registry.png 1152w\", \"/refarch-eda/static/bbe2999dae1d8696a725a87b684a83e4/26482/EDA-avro-schema-registry.png 1428w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p>{`One of the most common technologies used in the industry these days to define, serialize and deserialize messages flowing through your Kafka topics is Apache Avro (`}<a parentName=\"p\" {...{\n        \"href\": \"https://avro.apache.org/docs/current/\"\n      }}>{`https://avro.apache.org/docs/current/`}</a>{`). To learn more about Apache Avro, how to define Apache Avro data schemas and more see our documentation `}<a parentName=\"p\" {...{\n        \"href\": \"https://ibm-cloud-architecture.github.io/refarch-kc/avro/avro\"\n      }}>{`here`}</a></p>\n    <p>{`IBM Event Streams on IBM Cloud development team has developed a Schema Registry to work along your Kafka cluster to provide centralized schema management and compatibility checks as schemas evolve so that the communication between Kafka producers and consumers follow these schemas for consistency or as many like to say, meet the contracts that schemas are.`}</p>\n    <h3>{`Overview`}</h3>\n    <p>{`The schema registry capability is being developed for the IBM Event Streams managed Kafka service running in IBM Cloud. The purpose of the schema registry is to provide a place to store descriptions of the message formats used by your producers and consumers. The benefit of storing these descriptions is that you are able to validate that your producing and consuming applications will correctly inter-operate.`}</p>\n    <p>{`Currently the schema registry is in early access status. This means that a limited function version of the registry is being made available to a small group of users for the purpose of gathering feedback, and rapidly iterating on the design of the registry. Please note that while the schema registry is in early access, there may be occasions when IBM will delete all of the schema data held within the registry.`}</p>\n    <h3>{`Current features`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Support for creating, listing and deleting schemas via a REST interface`}</li>\n      <li parentName=\"ul\">{`Support for creating, listing and deleting versions of a schema, via a REST interface`}</li>\n      <li parentName=\"ul\">{`Support for using schema information in Kafka producer and consumer applications via the Confluent AVRO SerDes`}</li>\n      <li parentName=\"ul\">{`Support for Apache AVRO as the format used to express schemas`}</li>\n      <li parentName=\"ul\">{`Support for applying constraints on schema compatibility, either at a global scope, or on a per-schema basis`}</li>\n      <li parentName=\"ul\">{`Access to schema registry requires authentication and access is controlled via IAM`}</li>\n      <li parentName=\"ul\">{`Access to individual schemas, and compatibility rules can be controlled via a new IAM schema resource type`}</li>\n      <li parentName=\"ul\">{`Constraints on maximum schema size (64K), the maximum number of schemas that can be stored in the registry (1000) and the maximum number of versions a schema can have (100)`}</li>\n      <li parentName=\"ul\">{`SLA of 99.99% availability, consistent with that of the Event Streams service`}</li>\n    </ul>\n    <h3>{`Current limitations`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`No caching performed for frequently requested schemas`}</li>\n      <li parentName=\"ul\">{`Does not publish metrics to Sysdig`}</li>\n      <li parentName=\"ul\">{`Does not generate Activity Tracker events`}</li>\n      <li parentName=\"ul\">{`There may be other missing functions that you require. Please let IBM know!`}</li>\n    </ul>\n    <h3>{`Enabling the Schema Registry`}</h3>\n    <p>{`Currently the schema registry is not enabled by default and can only be enabled for IBM Event Streams Enterprise plan service instances. To request the enablement of the schema registry, please raise a support ticket `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/docs/get-support?topic=get-support-getting-customer-support#using-avatar\"\n      }}>{`here`}</a>{`. Ensure that you `}<strong parentName=\"p\">{`include the CRN of your Event Streams service instance in the ticket`}</strong>{`. The CRN of the service instance can be found using the following IBM Cloud CLI command `}<inlineCode parentName=\"p\">{`ibmcloud resource service-instance <SERVICENAME>`}</inlineCode>{` (where `}<inlineCode parentName=\"p\">{`SERVICENAME`}</inlineCode>{` is the name of your Event Streams service instance). For more info on how to get your IBM Event Streams service instance CRN review the `}<a parentName=\"p\" {...{\n        \"href\": \"../es-cloud/#creating-event-streams-instance-with-ibm-cloud-cli\"\n      }}>{`Event Streams on Cloud hands on lab`}</a>{`.`}</p>\n    <p>{`If you have already enabled the schema registry capability for an Event Streams Enterprise plan service instance, it will automatically receive updates as new capabilities become available.`}</p>\n    <h3>{`Accessing the Schema Registry`}</h3>\n    <p>{`To access the schema registry, you will need the URL of the schema registry as well as a set of credentials that can be used to authenticate with the registry. Both of these pieces of information can be found by inspecting the service credentials for your service. To view these in the UI, click on your service instance, select `}<em parentName=\"p\">{`Service credentials`}</em>{` in the left-hand navigation pane, then click on the dropdown arrow next to one of the service credentials name listed in the table. You should see something like this:`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"960px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"45.138888888888886%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcklEQVQoz52R2U6DQBSGefQWWQTjlW/ipQ9ga+KlrUmj1RYopQvMsJRlgN8zozVpm3jhJF9mCHO+s4xmWjaGQ50YwHFvcO3ewrRd2LYDxznFdV1YlgXDMGCapsK2behXBgZDE7puQBOiRV03AHpUjUBe9qg7+fW/pS2WPlarAPv9HtvNBuswRBzHSJJY7UeSJAHn/ARGFDnH3Ge4u+d4eObQ5I80TZFlmQqSUhXMKIgxMCKKIpXwXCjJUo5oyzF6YZgtSJjnOY6ItoXouos2qqpS9H/OoUcrSmiyMkleFGhIunmbYTIeYfo0xmT0CO91CtE0NOcaLSXsydpT0u4MueRoVIVSWJCwJKJwhTAIEHge7T52NIKM7hSHAw5lhZLEZVWjpiRCCEX/U7rs4kRYEzE90M73FFtviR1JGSVJozW4ZB2i2G3RV+VF01L+K5QtVwWdKSj6/ED0Mcd6/o69v0TD2Tf0AAo6C7orR3CsUp5lhV+OdJp6adv38QAAAABJRU5ErkJggg==')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"22\",\n        \"title\": \"22\",\n        \"src\": \"/refarch-eda/static/2b4572373601c5fe788311044f21a16d/4552c/22.png\",\n        \"srcSet\": [\"/refarch-eda/static/2b4572373601c5fe788311044f21a16d/7fc1e/22.png 288w\", \"/refarch-eda/static/2b4572373601c5fe788311044f21a16d/a5df1/22.png 576w\", \"/refarch-eda/static/2b4572373601c5fe788311044f21a16d/4552c/22.png 960w\"],\n        \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p>{`You will need the value of `}<strong parentName=\"p\">{`kafka_http_url`}</strong>{`, which is also the URL of the schema registry, and the value of `}<strong parentName=\"p\">{`apikey`}</strong>{` which you can use as the credential for authenticating with the schema registry.`}</p>\n    <p>{`To check we have appropriate permissions to work with the Schema Registry, we can execute the following command that would actually list the schemas stored in the schema registry in our terminal:`}</p>\n    <p><inlineCode parentName=\"p\">{`curl -i –u token:<KAFKA_APIKEY> <URL>/artifacts`}</inlineCode></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`curl -i -u token:***** https://mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud/artifacts\nHTTP/1.1 200 OK\nDate: Wed, 13 May 2020 11:38:36 GMT\nContent-Type: application/json\nContent-Length: 3\nConnection: keep-alive\n\n[]\n`}</code></pre>\n    <p>{`As you can see, no schema is being retrieved which makes sense with the just out of the box schema registry status we are at.`}</p>\n    <InlineNotification kind=\"info\" mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`INFO:`}</strong>{` For easiness executing the following schema registry REST API commands, we recommend you set your `}<strong parentName=\"p\">{`kafka_http_url`}</strong>{` and `}<strong parentName=\"p\">{`apikey`}</strong>{` as `}<strong parentName=\"p\">{`URL`}</strong>{` and `}<strong parentName=\"p\">{`KAFKA_APIKEY`}</strong>{` environment variables respectively as explained in the `}<a parentName=\"p\" {...{\n          \"href\": \"#ibm-event-streams-service-credentials\"\n        }}>{`IBM Event Streams Service Credentials`}</a>{` section.`}</p>\n    </InlineNotification>\n    <h2>{`Schemas`}</h2>\n    <p>{`In this section we will finally get our hands dirty with the IBM Event Steams on IBM Cloud Schema Registry capability by working with Apache Avro schemas and the schema registry.`}</p>\n    <h3>{`Create a schema`}</h3>\n    <p>{`This endpoint is used to store a schema in the registry. The schema data is sent as the body of the post request. An ID for the schema can be included using the `}<inlineCode parentName=\"p\">{`X-Registry-ArtifactId`}</inlineCode>{` request header. If this header is not present in the request, then an ID will be generated. The content type header must be set to `}<inlineCode parentName=\"p\">{`application/json`}</inlineCode>{`.`}</p>\n    <p>{`Creating a schema requires at least both:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Reader role access to the Event Streams cluster resource type`}</li>\n      <li parentName=\"ul\">{`Writer role access to the schema resource that matches the schema being created`}</li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create a schema with:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`curl -u token:$KAFKA_APIKEY -H 'Content-Type: application/json' -H 'X- Registry-ArtifactId: <SCHEMA_ID>' $URL/artifacts -d '<AVRO_SCHEMA>'`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: demo-schema' \\\\\n        $URL/artifacts \\\\\n        -d '{   \"type\":\"record\",\n                \"name\":\"demoSchema\",\n                \"fields\":[\n                        {\"name\": \"eventKey\",\"type\":\"string\"},\n                        {\"name\": \"message\",\"type\":\"string\"}] }'\n\n{\"id\":\"demo-schema\",\"type\":\"AVRO\",\"version\":1,\"createdBy\":\"\",\"createdOn\":1589371190273,\"modifiedBy\":\"\",\"modifiedOn\":1589371190273,\"globalId\":1}\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create a few more schemas.`}</p>\n      </li>\n    </ol>\n    <h3>{`List schemas`}</h3>\n    <p>{`Listing schemas requires at least:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Reader role access to the Event Streams cluster resource type`}</li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`List the schemas and see the ones you have created previously with:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`curl -u token:$KAFKA_APIKEY $URL/artifacts`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$KAFKA_APIKEY $URL/artifacts\n\n[\"demo-schema\",\"demo-schema-2\"]\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Delete schemas`}</h3>\n    <p>{`Schemas are deleted from the registry by issuing a DELETE request to the `}<inlineCode parentName=\"p\">{`/artifacts/{schema-id}`}</inlineCode>{` endpoint (where `}<inlineCode parentName=\"p\">{`{schema-id}`}</inlineCode>{` is the ID of the schema). If successful an empty response, and a status code of 204 (no content) is returned.`}</p>\n    <p>{`Deleting a schema requires at least both:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Reader role access to the Event Streams cluster resource type`}</li>\n      <li parentName=\"ul\">{`Manager role access to the schema resource that matches the schema being deleted`}</li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Delete one (or all) of the schemas you created previously with:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`curl -u token:$KAFKA_APIKEY -X DELETE $URL/artifacts/my-schema`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -i -u token:$KAFKA_APIKEY -X DELETE $URL/artifacts/demo-schema\nHTTP/1.1 204 No Content\nDate: Wed, 13 May 2020 12:37:48 GMT\nConnection: keep-alive\n\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Create new schema version`}</h3>\n    <p>{`To create a new version of a schema, make a POST request to the `}<inlineCode parentName=\"p\">{`/artifacts/{schema-id}/versions`}</inlineCode>{` endpoint, (where `}<inlineCode parentName=\"p\">{`{schema-id}`}</inlineCode>{` is the ID of the schema). The body of the request must contain the new version of the schema.`}</p>\n    <p>{`If the request is successful the new schema version is created as the new latest version of the schema, with an appropriate version number, and a response with status code 200 (OK) and a payload containing metadata describing the new version, (including the version number), is returned.`}</p>\n    <p>{`Creating a new version of a schema requires at least both:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Reader role access to the Event Streams cluster resource type`}</li>\n      <li parentName=\"ul\">{`Writer role access to the schema resource that matches the schema getting a new version`}</li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create a new schema:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: version-demo-schema' \\\\\n        $URL/artifacts \\\\\n        -d '{\"type\":\"record\",\n            \"name\":\"versionDemoSchema\",\n            \"fields\":[\n                {\"name\": \"eventKey\",\"type\":\"string\"},\n                {\"name\": \"message\",\"type\":\"string\"}] }'\n\n{\"id\":\"version-demo-schema\",\"type\":\"AVRO\",\"version\":1,\"createdBy\":\"\",\"createdOn\":1589380529049,\"modifiedBy\":\"\",\"modifiedOn\":1589380529049,\"globalId\":9}\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Add a new attribute to the schema and create a new version for it with:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`curl -u token:$KAFKA_APIKEY -H 'Content-Type: application/json' $URL/artifacts/<SCHEMA_ID>/versions -d '<AVRO_SCHEMA'`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: version-demo-schema' \\\\\n        $URL/artifacts/version-demo-schema/versions \\\\\n        -d '{\"type\":\"record\",\n            \"name\":\"versionDemoSchema\",\n            \"fields\":[\n                {\"name\": \"eventKey\",\"type\":\"string\"},\n                {\"name\": \"message\",\"type\":\"string\"},\n                {\"name\": \"attribute1\",\"type\":\"string\"}]}'\n\n{\"id\":\"version-demo-schema\",\"type\":\"AVRO\",\"version\":2,\"createdBy\":\"\",\"createdOn\":1589380529049,\"modifiedBy\":\"\",\"modifiedOn\":1589380728324,\"globalId\":10}\n`}</code></pre>\n        <p parentName=\"li\">{`(`}{`*`}{`) See that the returned JSON object includes the version for the schema and that this has increased`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create yet another new attribute and version for the schema:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: version-demo-schema' \\\\\n        $URL/artifacts/version-demo-schema/versions \\\\\n        -d '{\"type\":\"record\",\n            \"name\":\"versionDemoSchema\",\n            \"fields\":[\n                {\"name\": \"eventKey\",\"type\":\"string\"},\n                {\"name\": \"message\",\"type\":\"string\"},\n                {\"name\": \"attribute1\",\"type\":\"string\"},\n                {\"name\": \"attribute2\",\"type\":\"string\"}]}'\n\n{\"id\":\"version-demo-schema\",\"type\":\"AVRO\",\"version\":3,\"createdBy\":\"\",\"createdOn\":1589380529049,\"modifiedBy\":\"\",\"modifiedOn\":1589380955324,\"globalId\":11}\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Get latest version of a schema`}</h3>\n    <p>{`To retrieve the latest version of a particular schema, make a GET request to the `}<inlineCode parentName=\"p\">{`/artifacts/{schema-id}`}</inlineCode>{` endpoint, (where `}<inlineCode parentName=\"p\">{`{schema-id}`}</inlineCode>{` is the ID of the schema). If successful, the latest version of the schema is returned in the payload of the response.`}</p>\n    <p>{`Getting the latest version of a schema requires at least both:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Reader role access to the Event Streams cluster resource type`}</li>\n      <li parentName=\"ul\">{`Reader role access to the schema resource that matches the schema being retrieved`}</li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Get the latest version of the schema with:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`curl -u token:$KAFKA_APIKEY $URL/artifacts/<SCHEMA_ID>`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$KAFKA_APIKEY $URL/artifacts/version-demo-schema\n{\n    \"type\":\"record\",\n    \"name\":\"versionDemoSchema\",\n    \"fields\":[\n        {\"name\": \"eventKey\",\"type\":\"string\"},\n        {\"name\": \"message\",\"type\":\"string\"},\n        {\"name\": \"attribute1\",\"type\":\"string\"},\n        {\"name\": \"attribute2\",\"type\":\"string\"}]\n}\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Get specific version of a schema`}</h3>\n    <p>{`To retrieve a specific version of a schema, make a GET request to the `}<inlineCode parentName=\"p\">{`/artifacts/{schema-id}/versions/{version}`}</inlineCode>{` endpoint, (where `}<inlineCode parentName=\"p\">{`{schema-id}`}</inlineCode>{` is the ID of the schema, and `}<inlineCode parentName=\"p\">{`{version}`}</inlineCode>{` is the version number of the specific version you need to retrieve). If successful, the specified version of the schema is returned in the payload of the response.`}</p>\n    <p>{`Getting the latest version of a schema requires at least both:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Reader role access to the Event Streams cluster resource type`}</li>\n      <li parentName=\"ul\">{`Reader role access to the schema resource that matches the schema being retrieved`}</li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Get a specific version of a schema with:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`curl -u token:$KAFKA_APIKEY $URL/artifacts/<SCHEMA_ID>/versions/<VERSION_ID>`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$KAFKA_APIKEY $URL/artifacts/version-demo-schema/versions/2\n{\n    \"type\":\"record\",\n    \"name\":\"versionDemoSchema\",\n    \"fields\":[\n        {\"name\": \"eventKey\",\"type\":\"string\"},\n        {\"name\": \"message\",\"type\":\"string\"},\n        {\"name\": \"attribute1\",\"type\":\"string\"}]\n}\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Listing all versions of a schema`}</h3>\n    <p>{`To list all versions of a schema currently stored in the registry, make a GET request to the `}<inlineCode parentName=\"p\">{`/artifacts/{schema-id}/versions`}</inlineCode>{` endpoint, (where `}<inlineCode parentName=\"p\">{`{schema-id}`}</inlineCode>{` is the ID of the schema). If successful, a list of all current version numbers for the schema is returned in the payload of the response.`}</p>\n    <p>{`Getting the list of available versions of a schema requires at least both:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Reader role access to the Event Streams cluster resource type`}</li>\n      <li parentName=\"ul\">{`Reader role access to the schema resource that matches the schema being retrieved`}</li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Get all the versions for a schema with:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`curl -u token:$KAFKA_APIKEY $URL/artifacts/<SCHEMA_ID>/versions`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$KAFKA_APIKEY $URL/artifacts/version-demo-schema/versions\n\n[1,2,3]\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Deleting a version of a schema`}</h3>\n    <p>{`Schema versions are deleted from the registry by issuing a DELETE request to the `}<inlineCode parentName=\"p\">{`/artifacts/{schema-id}/versions/{version}`}</inlineCode>{` endpoint (where `}<inlineCode parentName=\"p\">{`{schema-id}`}</inlineCode>{` is the ID of the schema, and {version} is the version number of the schema version). If successful an empty response, and a status code of 204 (no content) is returned. Deleting the only remaining version of a schema will also delete the schema.`}</p>\n    <p>{`Deleting a schema version requires at least both:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Reader role access to the Event Streams cluster resource type`}</li>\n      <li parentName=\"ul\">{`Manager role access to the schema resource that matches the schema being deleted`}</li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Delete a version of a schema with:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`curl -u token:$KAFKA_APIKEY -X DELETE $URL/artifacts/<SCHEMA_ID>/versions/<VERSION_ID>`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$KAFKA_APIKEY -X DELETE $URL/artifacts/version-demo-schema/versions/2\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Make sure your specific version has been deleted by listing all the version for that schema:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$KAFKA_APIKEY $URL/artifacts/version-demo-schema/versions\n\n[1,3]\n`}</code></pre>\n      </li>\n    </ol>\n    <p>{`If you deleted a schema, it will get deleted along with all its versions.`}</p>\n    <h2>{`Python Avro Producer`}</h2>\n    <p>{`In this section we describe the python scripts we will be using in order to be able to produce `}<strong parentName=\"p\">{`avro`}</strong>{` messages to a Kafka topic.`}</p>\n    <h3>{`Produce Message`}</h3>\n    <p>{`The python script that we will use to send an avro message to a Kafka topic is `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/refarch-eda-tools/tree/master/labs/es-cloud-schema-lab/src/ProduceAvroMessage.py\"\n      }}>{`ProduceAvroMessage.py`}</a>{` where we have the following:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`A function to parse the arguments:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-python\"\n          }}>{`def parseArguments():\n    global TOPIC_NAME\n    print(\"The arguments for this script are: \" , str(sys.argv))\n    if len(sys.argv) == 2:\n        TOPIC_NAME = sys.argv[1]\n    else:\n        print(\"[ERROR] - The produceAvroMessage.py script expects one argument: The Kafka topic to publish the message to\")\n        exit(1)\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`A function to create the event to be sent:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-python\"\n          }}>{`def createEvent():\n    print('Creating event...')\n\n    event = {\n            \"eventKey\" : \"1\", \n            \"message\" : \"This is a test message\"\n            }\n\n    print(\"DONE\")\n    return json.dumps(event)\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`The main where we will:`}</p>\n        <ol parentName=\"li\">\n          <li parentName=\"ol\">{`Parse the arguments`}</li>\n          <li parentName=\"ol\">{`Get the Avro schemas for the key and value of the event`}</li>\n          <li parentName=\"ol\">{`Create the Event to be sent`}</li>\n          <li parentName=\"ol\">{`Print it out for reference`}</li>\n          <li parentName=\"ol\">{`Create the Kafka Avro Producer and configure it`}</li>\n          <li parentName=\"ol\">{`Send the event`}</li>\n        </ol>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-python\"\n          }}>{`if __name__ == '__main__':\n    # Get the Kafka topic name\n    parseArguments()\n    # Get the avro schemas for the message's key and value\n    event_value_schema = getDefaultEventValueSchema(DATA_SCHEMAS)\n    event_key_schema = getDefaultEventKeySchema(DATA_SCHEMAS)\n    # Create the event\n    message_event = createEvent()\n    # Print out the event to be sent\n    print(\"--- Container event to be published: ---\")\n    print(json.loads(message_event))\n    print(\"----------------------------------------\")\n    # Create the Kafka Avro Producer\n    kafka_producer = KafkaProducer(KAFKA_BROKERS,KAFKA_APIKEY,SCHEMA_REGISTRY_URL)\n    # Prepare the Kafka Avro Producer\n    kafka_producer.prepareProducer(\"ProduceAvroMessagePython\",event_key_schema,event_value_schema)\n    # Publish the event\n    kafka_producer.publishEvent(TOPIC_NAME,message_event,\"eventKey\")\n`}</code></pre>\n      </li>\n    </ol>\n    <p>{`As you can see, this python code depends on a Kafka Avro Producer and an Avro Utils for loading the Avro schemas which are explained next.`}</p>\n    <h3>{`Avro Utils`}</h3>\n    <p>{`This script, called `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/refarch-eda-tools/tree/master/labs/es-cloud-schema-lab/avro_files/utils/avroEDAUtils.py\"\n      }}>{`avroEDAUtils.py`}</a>{`, contains some very simple utility functions to be able to load Avro schemas from their `}<strong parentName=\"p\">{`avsc`}</strong>{` files in order to be used by the Kafka Avro Producer.`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`A function to get the key and value Avro schemas for the messages to be sent:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-python\"\n          }}>{`def getDefaultEventValueSchema(schema_files_location):\n# Get the default event value data schema\nknown_schemas = avro.schema.Names()\ndefault_event_value_schema = LoadAvsc(schema_files_location + \"/default_value.avsc\", known_schemas)\nreturn default_event_value_schema\n\ndef getDefaultEventKeySchema(schema_files_location):\n# Get the default event key data schema\nknown_schemas = avro.schema.Names()\ndefault_event_key_schema = LoadAvsc(schema_files_location + \"/default_key.avsc\", known_schemas)\nreturn default_event_key_schema\n`}</code></pre>\n        <p parentName=\"li\">{`(`}{`*`}{`) Where `}<inlineCode parentName=\"p\">{`known_schemas`}</inlineCode>{` is an Avro schema dictionary where all Avro schemas read get stored in order to be able to read nested Avro schemas afterwards. See the python script in detail for examples of this.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`A function to open a file, read its content as an Avro schema and store it in the Avro schema dictionary:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-python\"\n          }}>{`def LoadAvsc(file_path, names=None):\n# Load avsc file\n# file_path: path to schema file\n# names(optional): avro.schema.Names object\nfile_text = open(file_path).read()\njson_data = json.loads(file_text)\nschema = avro.schema.SchemaFromJSONData(json_data, names)\nreturn schema\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Kafka Avro Producer`}</h3>\n    <p>{`This script, called `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/refarch-eda-tools/tree/master/labs/es-cloud-schema-lab/kafka/KcAvroProducer.py\"\n      }}>{`KcAvroProducer.py`}</a>{`, will actually be the responsible for creating the Kafka Avro Producer, initialize and configure it and provide the publish method:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Initialize and prepare the Kafka Producer`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-python\"\n          }}>{`class KafkaProducer:\n\n    def __init__(self,kafka_brokers = \"\",kafka_apikey = \"\",schema_registry_url = \"\"):\n        self.kafka_brokers = kafka_brokers\n        self.kafka_apikey = kafka_apikey\n        self.schema_registry_url = schema_registry_url\n\n    def prepareProducer(self,groupID = \"pythonproducers\",key_schema = \"\", value_schema = \"\"):\n        options ={\n                'bootstrap.servers':  self.kafka_brokers,\n                'schema.registry.url': self.schema_registry_url,\n                'group.id': groupID,\n                'security.protocol': 'SASL_SSL',\n                'sasl.mechanisms': 'PLAIN',\n                'sasl.username': 'token',\n                'sasl.password': self.kafka_apikey\n        }\n        # Print out the configuration\n        print(\"--- This is the configuration for the producer: ---\")\n        print(options)\n        print(\"---------------------------------------------------\")\n        # Create the Avro Producer\n        self.producer = AvroProducer(options,default_key_schema=key_schema,default_value_schema=value_schema)\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Publish method`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-python\"\n          }}>{`def publishEvent(self, topicName, value, key):\n        # Produce the Avro message\n        # Important: value DOES NOT come in JSON format from ContainerAvroProducer.py. Therefore, we must convert it to JSON format first\n        self.producer.produce(topic=topicName,value=json.loads(value),key=json.loads(value)[key], callback=self.delivery_report)\n        # Flush\n        self.producer.flush()\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Run`}</h3>\n    <p>{`We will see in the following section `}<a parentName=\"p\" {...{\n        \"href\": \"#schemas-and-messages\"\n      }}>{`Schemas and Messages`}</a>{` how to send Avro messages according with their schemas to IBM Event Streams.`}</p>\n    <h2>{`Python Avro Consumer`}</h2>\n    <p>{`In this section we describe the python scripts we will be using in order to be able to consume Avro messages from a Kafka topic.`}</p>\n    <h3>{`Consume Message`}</h3>\n    <p>{`The python script that we will use to consume an Avro message from a Kafka topic is `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/refarch-eda-tools/tree/master/labs/es-cloud-schema-lab/src/ConsumeAvroMessage.py\"\n      }}>{`ConsumeAvroMessage.py`}</a>{` where we have the following:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`A function to parse arguments:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-python\"\n          }}>{`# Parse arguments to get the container ID to poll for\ndef parseArguments():\n    global TOPIC_NAME\n    print(\"The arguments for the script are: \" , str(sys.argv))\n    if len(sys.argv) != 2:\n        print(\"[ERROR] - The ConsumeAvroMessage.py script expects one arguments: The Kafka topic to events from.\")\n        exit(1)\n    TOPIC_NAME = sys.argv[1]\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`The main where we will:`}</p>\n        <ol parentName=\"li\">\n          <li parentName=\"ol\">{`Parse the arguments to get the topic to read from`}</li>\n          <li parentName=\"ol\">{`Create the Kafka Consumer and configure it`}</li>\n          <li parentName=\"ol\">{`Poll for next avro message`}</li>\n          <li parentName=\"ol\">{`Close the Kafka consumer`}</li>\n        </ol>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-python\"\n          }}>{`if __name__ == '__main__':\n    # Parse arguments\n    parseArguments()\n    # Create the Kafka Avro consumer\n    kafka_consumer = KafkaConsumer(KAFKA_BROKERS,KAFKA_APIKEY,TOPIC_NAME,SCHEMA_REGISTRY_URL)\n    # Prepare the consumer\n    kafka_consumer.prepareConsumer()\n    # Consume next Avro event\n    kafka_consumer.pollNextEvent()\n    # Close the Avro consumer\n    kafka_consumer.close()\n`}</code></pre>\n      </li>\n    </ol>\n    <p>{`As you can see, this python code depends on a Kafka Consumer which is explained next.`}</p>\n    <h3>{`Kafka Avro Consumer`}</h3>\n    <p>{`This script, called `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/refarch-eda-tools/tree/master/labs/es-cloud-schema-lab/kafka/KcAvroConsumer.py\"\n      }}>{`KcAvroConsumer.py`}</a>{`, will actually be the responsible for creating the Kafka Avro Consumer, initialize and configure it and provide the poll next event method:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Initialize and prepare the new Kafka consumer:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-python\"\n          }}>{`class KafkaConsumer:\n\n    def __init__(self, kafka_brokers = \"\", kafka_apikey = \"\", topic_name = \"\", schema_registry_url = \"\", autocommit = True):\n        self.kafka_brokers = kafka_brokers\n        self.kafka_apikey = kafka_apikey\n        self.topic_name = topic_name\n        self.schema_registry_url = schema_registry_url \n        self.kafka_auto_commit = autocommit\n\n    # See https://github.com/edenhill/librdkafka/blob/master/CONFIGURATION.md\n    def prepareConsumer(self, groupID = \"pythonconsumers\"):\n        options ={\n                'bootstrap.servers':  self.kafka_brokers,\n                'group.id': groupID,\n                'auto.offset.reset': 'earliest',\n                'schema.registry.url': self.schema_registry_url,\n                'enable.auto.commit': self.kafka_auto_commit,\n                'security.protocol': 'SASL_SSL',\n                'sasl.mechanisms': 'PLAIN',\n                'sasl.username': 'token',\n                'sasl.password': self.kafka_apikey\n        }\n        # Print the configuration\n        print(\"--- This is the configuration for the Avro consumer: ---\")\n        print(options)\n        print(\"---------------------------------------------------\")\n        # Create the Avro consumer\n        self.consumer = AvroConsumer(options)\n        # Subscribe to the topic\n        self.consumer.subscribe([self.topic_name])\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Poll next event method:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-python\"\n          }}>{`# Prints out the message\ndef traceResponse(self, msg):\n    print('@@@ pollNextOrder - {} partition: [{}] at offset {} with key {}:\\\\n\\\\tvalue: {}'\n                .format(msg.topic(), msg.partition(), msg.offset(), msg.key(), msg.value() ))\n\n# Polls for next event\ndef pollNextEvent(self):\n    # Poll for messages\n    msg = self.consumer.poll(timeout=10.0)\n    # Validate the returned message\n    if msg is None:\n        print(\"[INFO] - No new messages on the topic\")\n    elif msg.error():\n        if (\"PARTITION_EOF\" in msg.error()):\n            print(\"[INFO] - End of partition\")\n        else:\n            print(\"[ERROR] - Consumer error: {}\".format(msg.error()))\n    else:\n        # Print the message\n        msgStr = self.traceResponse(msg)\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Run`}</h3>\n    <p>{`We will see in the following section `}<a parentName=\"p\" {...{\n        \"href\": \"#schemas-and-messages\"\n      }}>{`Schemas and Messages`}</a>{` how to consume Avro messages.`}</p>\n    <h2>{`Schemas and Messages`}</h2>\n    <p>{`In this section we are going to see how Schema Registry works when you have an application that produces and consumes messages based on Avro data schemas. The application we are going to use for this is the python scripts presented above in the `}<a parentName=\"p\" {...{\n        \"href\": \"#python-avro-producer\"\n      }}>{`Python Avro Producer`}</a>{` and `}<a parentName=\"p\" {...{\n        \"href\": \"#python-avro-consumer\"\n      }}>{`Python Avro Consumer`}</a>{`.`}</p>\n    <p>{`Once again, we are going to run these scripts in the python demo environment we presented earlier in this lab in `}<a parentName=\"p\" {...{\n        \"href\": \"#python-demo-environment\"\n      }}>{`this section`}</a>{`. Please, review that section in order to understand how to run the environment in your local workstation.`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Make sure you have a newly created topic for this exercise (review the `}<a parentName=\"p\" {...{\n            \"href\": \"es-cloud/\"\n          }}>{`IBM Event Streams on IBM Cloud lab`}</a>{` if needed):`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ ibmcloud es topic-create test\nCreated topic test\nOK\n\n$ ibmcloud es topics\nTopic name\ntest\nOK\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Make sure you dont have any schema registered (preferably for clarity):`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$APIKEY $URL/artifacts\n[]\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Start your python environment with:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ docker run -e KAFKA_BROKERS=$KAFKA_BROKERS \\\\\n             -e KAFKA_APIKEY=$KAFKA_APIKEY \\\\\n             -e SCHEMA_REGISTRY_URL=$SCHEMA_REGISTRY_URL \\\\\n             -v \\${PWD}:/tmp/lab \\\\\n             --rm \\\\\n             -ti ibmcase/python-schema-registry-lab:latest bash\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Create a message`}</h3>\n    <p>{`In order to create a message, we execute the `}<inlineCode parentName=\"p\">{`ProduceAvroMessage.py`}</inlineCode>{` within the `}<inlineCode parentName=\"p\">{`/tmp/lab/src`}</inlineCode>{` folder in our python demo environment. This script, as you could see in the `}<a parentName=\"p\" {...{\n        \"href\": \"#python-avro-producer\"\n      }}>{`Python Avro Producer`}</a>{` section, it is sending the event `}<inlineCode parentName=\"p\">{`{'eventKey': '1', 'message': 'This is a test message'}`}</inlineCode>{` according to the schemas defined in `}<a parentName=\"p\" {...{\n        \"href\": \"avro_files/default_key.avsc\"\n      }}>{`default_key.avsc`}</a>{` and `}<a parentName=\"p\" {...{\n        \"href\": \"avro_files/default_value.avsc\"\n      }}>{`default_value.avsc`}</a>{` for the key and value of the event respectively.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`python ProduceAvroMessage.py test\n @@@ Executing script: ProduceAvroMessage.py\nThe arguments for the script are:  ['ProduceAvroMessage.py', 'test']\nCreating event...\nDONE\n--- Container event to be published: ---\n{'eventKey': '1', 'message': 'This is a test message'}\n----------------------------------------\n--- This is the configuration for the avro producer: ---\n{'bootstrap.servers': 'kafka-2.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093,kafka-1.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093,kafka-0.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093', 'schema.registry.url': 'https://token:4uk9gZ-n85a2esMoMZ5wtW-yIq_29o3PrHVBEFBj67N0@mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud/confluent', 'group.id': 'ProduceAvroMessagePython', 'security.protocol': 'SASL_SSL', 'sasl.mechanisms': 'PLAIN', 'sasl.username': 'token', 'sasl.password': '*****'}\n---------------------------------------------------\nMessage delivered to test [0]\n`}</code></pre>\n    <p>{`We should now have a new message in our `}<inlineCode parentName=\"p\">{`test`}</inlineCode>{` kafka topic. We can check that out using `}<a parentName=\"p\" {...{\n        \"href\": \"#kafdrop\"\n      }}>{`Kafdrop`}</a>{`:`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"34.375%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABZklEQVQoz42ST0/CQBDF+yVMoC3Q3RYKRUrVAoLlX1sK1XgAYxNjCF69m3iXoDFy4oyJJPI5n9MCnjn8MjO7s5P3JiuwQQhNtaFmMuBZQlHAOAdnDDyOx8DoTaEAVixBkB/myFuPkBoXkFttKEYZPJdLhjIaejSqSmgQSuYlrGoTBecKeqcLbteg5vNQqSFG07R/DmcHeIK2i3u1Qq/bhud7CDwffqcDdmHjhC6ysowcKU2n00ilUkmM6xhRFBMY9TAxDSZRHq+KlArnpOj65hbBKMTdfYTJeIxREMCu1WCaJgLKwzDEcDiEZVnJmeu68Pp9FGlFuh+SMxd6yUBR1yGcUdNs9oQoirBcLvGz2eB3u8V0OsV4Mknq9XqN1WqVDHccB4v3D3zO31B6fgH/+kb+dYEKOTMrFQjVZgvtXh/1egOuN4BZrdJ+OAzDIJV1GOVTSGTvYFkha5IkJfDM3rJMOd/9ij/WIt7aMNOK2wAAAABJRU5ErkJggg==')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"23\",\n        \"title\": \"23\",\n        \"src\": \"/refarch-eda/static/a869933d688302615de80fc0eaa8372f/3cbba/23.png\",\n        \"srcSet\": [\"/refarch-eda/static/a869933d688302615de80fc0eaa8372f/7fc1e/23.png 288w\", \"/refarch-eda/static/a869933d688302615de80fc0eaa8372f/a5df1/23.png 576w\", \"/refarch-eda/static/a869933d688302615de80fc0eaa8372f/3cbba/23.png 1152w\", \"/refarch-eda/static/a869933d688302615de80fc0eaa8372f/0b124/23.png 1728w\", \"/refarch-eda/static/a869933d688302615de80fc0eaa8372f/fde92/23.png 1824w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <InlineNotification kind=\"info\" mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`INFO:`}</strong>{` Mind the message now is not in JSON format as Avro does not repeat every field name with every single record which makes Avro more efficient than JSON for high-volume usage. This is thanks to having Avro schemas.`}</p>\n    </InlineNotification>\n    <InlineNotification kind=\"warning\" mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`WARNING:`}</strong>{` Most of the Avro producer clients, whether it is in Java, Python or many other languages, give users the ability to `}<strong parentName=\"p\">{`auto-register`}</strong>{` a schema automatically with the specified schema registry in its configuration.`}</p>\n    </InlineNotification>\n    <p>{`If we look know at the schemas our schema registry has:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl -u token:$APIKEY $URL/artifacts\n\n[\"test-key\",\"test-value\"]\n`}</code></pre>\n    <p>{`we see two schemas, `}<inlineCode parentName=\"p\">{`test-key`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`test-value`}</inlineCode>{`, which in fact correspond to the Avro data schema used for the `}<inlineCode parentName=\"p\">{`key`}</inlineCode>{` (`}<a parentName=\"p\" {...{\n        \"href\": \"avro_files/default_key.avsc\"\n      }}>{`default_key.avsc`}</a>{`) and the `}<inlineCode parentName=\"p\">{`value`}</inlineCode>{` (`}<a parentName=\"p\" {...{\n        \"href\": \"avro_files/default_value.avsc\"\n      }}>{`default_value.avsc`}</a>{`) of events sent to the `}<inlineCode parentName=\"p\">{`test`}</inlineCode>{` topic in the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/refarch-eda-tools/tree/master/labs/es-cloud-schema-lab/src/ProduceAvroMessage.py\"\n      }}>{`ProduceAvroMessage.py`}</a>{` as explained before sending the message.`}</p>\n    <p>{`To make sure of what we are saying, we can inspect those schemas:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl -u token:$APIKEY $URL/artifacts/test-key\n\n\"string\"\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl -s -u token:$APIKEY $URL/artifacts/test-value | jq .\n{\n  \"type\": \"record\",\n  \"name\": \"defaultValue\",\n  \"namespace\": \"ibm.eda.default\",\n  \"fields\": [\n    {\n      \"type\": \"string\",\n      \"name\": \"eventKey\",\n      \"doc\": \"We expect any string as the event key\"\n    },\n    {\n      \"type\": \"string\",\n      \"name\": \"message\",\n      \"doc\": \"Any string message\"\n    }\n  ],\n  \"doc\": \"Default Message's value Avro data schema, composed of the key again and any string message\"\n}\n`}</code></pre>\n    <p>{`If I now decided that my events should contain another attribute, I would modify the event value schema (`}<a parentName=\"p\" {...{\n        \"href\": \"avro_files/default_value.avsc\"\n      }}>{`default_value.avsc`}</a>{`) to reflect that as well as `}<inlineCode parentName=\"p\">{`ProduceAvroMessage.py`}</inlineCode>{` to send that new attribute in the event it sends:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`# python ProduceAvroMessage.py test\n @@@ Executing script: ProduceAvroMessage.py\nThe arguments for the script are:  ['ProduceAvroMessage.py', 'test']\nCreating event...\nDONE\n--- Container event to be published: ---\n{'eventKey': '1', 'message': 'This is a test message', 'anotherAttribute': 'This is another atttribute'}\n----------------------------------------\n--- This is the configuration for the avro producer: ---\n{'bootstrap.servers': 'kafka-2.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093,kafka-1.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093,kafka-0.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093', 'schema.registry.url': 'https://token:4uk9gZ-n85a2esMoMZ5wtW-yIq_29o3PrHVBEFBj67N0@mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud/confluent', 'group.id': 'ProduceAvroMessagePython', 'security.protocol': 'SASL_SSL', 'sasl.mechanisms': 'PLAIN', 'sasl.username': 'token', 'sasl.password': '*****'}\n---------------------------------------------------\nMessage delivered to test [0]\n`}</code></pre>\n    <p>{`I can see that an event with a new attribute has been sent:`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"38.19444444444444%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABk0lEQVQoz5WSwW7aUBBF/Q9dgMEG+9nGIAguVUiw3SQC6poQQFXSsK1YNKqo+gn9hEplmbYLitIFX3k6zw1Vlu3iat7MG83MnTtGUItRtSrKtlH1Oq5SuK7775B8JdZpt3GDAKMZ3VA5T6kOM+rR86Ko0kn/C8cpChvd7gtap6e04xjvuI8XNvEkwfM8fN//C+0fcPCV56PkrYq3QHkYWZZxNZ0yGY/xBzHPXIVdqVCXSU3TpFwuUyqVsCwLR6bQVsdsq4pbMXHMMq4tf5q+/BuTyymvstdcv73l9vqGuRRPkpTu0RG62Ww2Y7FYSCyh0+mQpikzyTl5eUYwymlN5oSDlFYYEgqM93d3LJdLNpsNDw+/2O/3fFyvyfOc+/tvbLdbdrsdq9WKXq+Hzt/++M5y/Qnr8xeCrz8J3n2g12rSliGMi+GIgVDNL6847veLLlEUMYgTTiSuF64p23IFWlVtTb0SfRVWpaCtavbjDhXGcDQmERrzxRuhnhGLOBp6DWfnFzQajT8CPFH04LuPYjw9td9mrP4Q0pWuRwAAAABJRU5ErkJggg==')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"24\",\n        \"title\": \"24\",\n        \"src\": \"/refarch-eda/static/7c8852a420586c4009c75d8d32e9a4a2/3cbba/24.png\",\n        \"srcSet\": [\"/refarch-eda/static/7c8852a420586c4009c75d8d32e9a4a2/7fc1e/24.png 288w\", \"/refarch-eda/static/7c8852a420586c4009c75d8d32e9a4a2/a5df1/24.png 576w\", \"/refarch-eda/static/7c8852a420586c4009c75d8d32e9a4a2/3cbba/24.png 1152w\", \"/refarch-eda/static/7c8852a420586c4009c75d8d32e9a4a2/0b124/24.png 1728w\", \"/refarch-eda/static/7c8852a420586c4009c75d8d32e9a4a2/59ab2/24.png 1800w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p>{`And I can also see that the new shcema has got registered as well as a `}<strong parentName=\"p\">{`new version`}</strong>{` for the already exisiting schema:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl -s -u token:$APIKEY $URL/artifacts/test-value/versions\n\n[1,2]\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl -s -u token:$APIKEY $URL/artifacts/test-value | jq .\n{\n  \"type\": \"record\",\n  \"name\": \"defaultValue\",\n  \"namespace\": \"ibm.eda.default\",\n  \"fields\": [\n    {\n      \"type\": \"string\",\n      \"name\": \"eventKey\",\n      \"doc\": \"We expect any string as the event key\"\n    },\n    {\n      \"type\": \"string\",\n      \"name\": \"message\",\n      \"doc\": \"Any string message\"\n    },\n    {\n      \"type\": \"string\",\n      \"name\": \"anotherAttribute\",\n      \"doc\": \"Another string attribute for demo\"\n    }\n  ],\n  \"doc\": \"Default Message's value Avro data schema, composed of the key again and any string message\"\n}\n`}</code></pre>\n    <InlineNotification kind=\"error\" mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`SECURITY:`}</strong>{` As some of you may have already thought, having your clients (that is your applications), auto-register the Avro data schemas that are in the end kind of the contracts that your components of your overal solution agree on in order to understand each other and collaborate between them is `}<strong parentName=\"p\">{`NOT`}</strong>{` a good idea. Specially in microservices architectures where you might have hundreds of microservices talking and collaborating among themselsves. We will see in the `}<a parentName=\"p\" {...{\n          \"href\": \"#security\"\n        }}>{`Security`}</a>{` section how we can control schema registration and evolution based on roles at the schema level also.`}</p>\n    </InlineNotification>\n    <h3>{`Create a non-compliant message`}</h3>\n    <p>{`Now, we are trying to send a non-compliant message according to the Avro data schema we have for our events. Im going to try to send the following event:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`{\n    'eventKey': '1',\n    'message': 'This is a test message',\n    'anotherAttribute': 'This is another atttribute',\n    'yetAnotherAttribute': 'This should fail'\n}\n`}</code></pre>\n    <p>{`and this is the output of that attempt:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`# python ProduceAvroMessage.py test\n @@@ Executing script: ProduceAvroMessage.py\nThe arguments for the script are:  ['ProduceAvroMessage.py', 'test']\nCreating event...\nDONE\n--- Container event to be published: ---\n{'eventKey': '1', 'message': 'This is a test message', 'anotherAttribute': 'This is another atttribute', 'yetAnotherAttribute': 'This should fail'}\n----------------------------------------\n--- This is the configuration for the avro producer: ---\n{'bootstrap.servers': 'kafka-2.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093,kafka-1.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093,kafka-0.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093', 'schema.registry.url': 'https://token:4uk9gZ-n85a2esMoMZ5wtW-yIq_29o3PrHVBEFBj67N0@mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud/confluent', 'group.id': 'ProduceAvroMessagePython', 'security.protocol': 'SASL_SSL', 'sasl.mechanisms': 'PLAIN', 'sasl.username': 'token', 'sasl.password': '*****'}\n---------------------------------------------------\nTraceback (most recent call last):\n  File \"ProduceAvroMessage.py\", line 77, in <module>\n    kp.publishEvent(TOPIC_NAME,message_event,\"eventKey\")\n  File \"/tmp/lab/kafka/KcAvroProducer.py\", line 39, in publishEvent\n    self.producer.produce(topic=topicName,value=json.loads(value),key=json.loads(value)[key], callback=self.delivery_report)\n  File \"/root/.local/lib/python3.7/site-packages/confluent_kafka/avro/__init__.py\", line 99, in produce\n    value = self._serializer.encode_record_with_schema(topic, value_schema, value)\n  File \"/root/.local/lib/python3.7/site-packages/confluent_kafka/avro/serializer/message_serializer.py\", line 118, in encode_record_with_schema\n    return self.encode_record_with_schema_id(schema_id, record, is_key=is_key)\n  File \"/root/.local/lib/python3.7/site-packages/confluent_kafka/avro/serializer/message_serializer.py\", line 152, in encode_record_with_schema_id\n    writer(record, outf)\n  File \"/root/.local/lib/python3.7/site-packages/confluent_kafka/avro/serializer/message_serializer.py\", line 86, in <lambda>\n    return lambda record, fp: writer.write(record, avro.io.BinaryEncoder(fp))\n  File \"/root/.local/lib/python3.7/site-packages/avro/io.py\", line 771, in write\n    raise AvroTypeException(self.writer_schema, datum)\navro.io.AvroTypeException: The datum {'eventKey': '1', 'message': 'This is a test message', 'anotherAttribute': 'This is another atttribute', 'yetAnotherAttribute': 'This should fail'} is not an example of the schema {\n  \"type\": \"record\",\n  \"name\": \"defaultValue\",\n  \"namespace\": \"ibm.eda.default\",\n  \"fields\": [\n    {\n      \"type\": \"string\",\n      \"name\": \"eventKey\",\n      \"doc\": \"We expect any string as the event key\"\n    },\n    {\n      \"type\": \"string\",\n      \"name\": \"message\",\n      \"doc\": \"Any string message\"\n    },\n    {\n      \"type\": \"string\",\n      \"name\": \"anotherAttribute\",\n      \"doc\": \"Another string attribute for demo\"\n    }\n  ],\n  \"doc\": \"Default Message's value Avro data schema, composed of the key again and any string message\"\n}\n`}</code></pre>\n    <p>{`As we can see, the attempt failed as the Avro producer will check the message against the Avro data schema defined for the topic we want to send the message to and yield that this message does not comply.`}</p>\n    <p>{`Therefore, using Avro schemas with IBM Event Streams give us the ability to build our system with `}<strong parentName=\"p\">{`robustness`}</strong>{` protecting downstream data consumers from malformed data, as only valid data will be permitted in the topic.`}</p>\n    <h3>{`Consume a message`}</h3>\n    <p>{`In order to consume a message, we execute the `}<inlineCode parentName=\"p\">{`ConsumeAvroMessage.py`}</inlineCode>{` within the `}<inlineCode parentName=\"p\">{`/tmp/lab/src`}</inlineCode>{` folder in our python demo environment:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`# python ConsumeAvroMessage.py test\n @@@ Executing script: ConsumeAvroMessage.py\nThe arguments for the script are:  ['ConsumeAvroMessage.py', 'test']\n--- This is the configuration for the Avro consumer: ---\n{'bootstrap.servers': 'kafka-2.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093,kafka-1.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093,kafka-0.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093', 'group.id': 'pythonconsumers', 'auto.offset.reset': 'earliest', 'schema.registry.url': 'https://token:4uk9gZ-n85a2esMoMZ5wtW-yIq_29o3PrHVBEFBj67N0@mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud/confluent', 'enable.auto.commit': True, 'security.protocol': 'SASL_SSL', 'sasl.mechanisms': 'PLAIN', 'sasl.username': 'token', 'sasl.password': '*****'}\n---------------------------------------------------\n[Message] - Next message consumed from test partition: [0] at offset 0 with key 1:\n    value: {'eventKey': '1', 'message': 'This is a test message'}\n\n# python ConsumeAvroMessage.py test\n @@@ Executing script: ConsumeAvroMessage.py\nThe arguments for the script are:  ['ConsumeAvroMessage.py', 'test']\n--- This is the configuration for the Avro consumer: ---\n{'bootstrap.servers': 'kafka-2.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093,kafka-1.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093,kafka-0.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud:9093', 'group.id': 'pythonconsumers', 'auto.offset.reset': 'earliest', 'schema.registry.url': 'https://token:4uk9gZ-n85a2esMoMZ5wtW-yIq_29o3PrHVBEFBj67N0@mh-tcqsppdpzlrkdmkbgmgl-4c201a12d7add7c99d2b22e361c6f175-0000.eu-de.containers.appdomain.cloud/confluent', 'enable.auto.commit': True, 'security.protocol': 'SASL_SSL', 'sasl.mechanisms': 'PLAIN', 'sasl.username': 'token', 'sasl.password': '*****'}\n---------------------------------------------------\n[Message] - Next message consumed from test partition: [0] at offset 1 with key 1:\n    value: {'eventKey': '1', 'message': 'This is a test message', 'anotherAttribute': 'This is another atttribute'}\n`}</code></pre>\n    <p>{`As you can see, our script was able to read the Avro messages from the `}<inlineCode parentName=\"p\">{`test`}</inlineCode>{` topic and map that back to their original structure thanks to the Avro schemas:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`[Message] - Next message consumed from test partition: [0] at offset 0 with key 1:\n    value: {'eventKey': '1', 'message': 'This is a test message'}\n\n[Message] - Next message consumed from - test partition: [0] at offset 1 with key 1:\n    value: {'eventKey': '1', 'message': 'This is a test message', 'anotherAttribute': 'This is another atttribute'}\n`}</code></pre>\n    <h2>{`Data Evolution`}</h2>\n    <p>{`So far we have more or less seen what Avro is, what an Avro data schema is, what a schema registry is and how this all works together. From creating an Avro data schema for your messages/events to comply with to how the schema registry and Avro data schemas work together. And we have also seen the code for doing all this, from the python code to send and receive Avro encoded messages based on their Avro data schemas to the rich API the IBM Event Streams on IBM Cloud schema registry provides to interact with.`}</p>\n    <p>{`However, we have said little about the need for data to evolve. When you design an Event Driven architecture for your application (by applying `}<a parentName=\"p\" {...{\n        \"href\": \"https://ibm-cloud-architecture.github.io/refarch-eda/methodology/event-storming/\"\n      }}>{`Event Storming`}</a>{` or `}<a parentName=\"p\" {...{\n        \"href\": \"https://ibm-cloud-architecture.github.io/refarch-eda/methodology/domain-driven-design/\"\n      }}>{`Domain Driven Design`}</a>{` for example), it is very hard to come up with data structures/schemas that will not need to evolve/change in time. That is, your data, like your use or business cases, may need to evolve. As a result, Avro data schemas must be somehow flexible to allow your data to evolve along with your application and use cases.`}</p>\n    <p>{`But it is not as easy as adding or removing data that travels in your events/messages or modifying the type of such data. And one of the reasons for this is that Kafka (or any other type of event backbone) is many times used as the source of truth. That is, a place that you can trust as to what has happened. Hence, Kafka will serve as the event source of truth where all the events (that is, data) that happened (which could be bank transactions, communications, etc) will get stored (sometimes up to `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.confluent.io/blog/publishing-apache-kafka-new-york-times/\"\n      }}>{`hundreds of years`}</a>{`) and will be able to be replayed if needed. As a result, there must be a data schema management and data schema evolution put in place that allow the `}<strong parentName=\"p\">{`compatibility`}</strong>{` of old and new data schemas and, in fact, old and new data at the end of the day.`}</p>\n    <p>{`The IBM Event Streams on IBM Cloud schema registry supports enforcing compatibility rules when creating a new version of a schema. If a request is made to create a new schema version that does not conform to the required compatibility rule, then the registry will reject the request. The following rules are supported:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Compatibility`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Tested against`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Descrition`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`NONE`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`N/A`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`No compatibility checking is performed when a new schema version is created`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`BACKWARD`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Latest version of the schema`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A new version of the schema can omit fields that are present in the existing version of the schema. A new version of the schema can add optional fields that are not present in the existing version of the schema.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`BACKWARD_TRANSITIVE`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`All versions of the schema`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Same as above`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`FORWARD`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Latest version of the schema`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A new version of the schema can add fields that are not present in the existing version of the schema. A new version of the schema can omit optional fields that are present in the existing version of the schema.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`FORWARD_TRANSITIVE`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`All versions of the schema`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Same as above`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`FULL`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Latest version of the schema`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A new version of the schema can add optional fields that are not present in the existing version of the schema. A new version of the schema can omit optional fields that are present in the existing version of the schema.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`FULL_TRANSITIVE`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`All versions of the schema`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Same as above`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`These rules can be applied at two `}<strong parentName=\"p\">{`scopes`}</strong>{`:`}</p>\n    <ol>\n      <li parentName=\"ol\"><strong parentName=\"li\">{`At a global scope`}</strong>{`, which is the default that`}</li>\n      <li parentName=\"ol\"><strong parentName=\"li\">{`At a per-schema level`}</strong>{`. If a per-schema level rule is defined, then this overrides the global\ndefault for the particular schema.`}</li>\n    </ol>\n    <p>{`By default, the registry has a global compatibility rule setting of `}<strong parentName=\"p\">{`NONE`}</strong>{`. Per-schema level rules must be defined otherwise the schema will default to using the global setting.`}</p>\n    <h3>{`Rules`}</h3>\n    <p>{`In this section we are going to see how to interact with the schema registry in order to alter the compatibility rules both at the global and per-schema level.`}</p>\n    <h4>{`Get the current value of a global rule`}</h4>\n    <p>{`The current value of a global rule is retrieved by issuing a GET request to the `}<inlineCode parentName=\"p\">{`/rules/{rule-type}`}</inlineCode>{` endpoint, (where `}<inlineCode parentName=\"p\">{`{rule-type}`}</inlineCode>{` is the type of global rule to be retrieved - currently the `}<strong parentName=\"p\">{`only supported type is COMPATIBILITY`}</strong>{`). If the request is successful then the current rule configuration is returned in the payload of the response, together with a status code of 200 (OK).`}</p>\n    <p>{`Getting global rule configuration requires at least:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Reader role access to the Event Streams cluster resource type`}</li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Get the current value for the `}<inlineCode parentName=\"p\">{`COMPATIBILITY`}</inlineCode>{` global rule with`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`curl -u token:$APIKEY $URL/rules/COMPATIBILITY`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$APIKEY $URL/rules/COMPATIBILITY\n\n{\"type\":\"COMPATIBILITY\",\"config\":\"NONE\"}\n`}</code></pre>\n      </li>\n    </ol>\n    <p>{`As already explained, the default out of the box global compatibility rule for IBM Event Streams on IBM Cloud schema registry is `}<inlineCode parentName=\"p\">{`NONE`}</inlineCode>{`.`}</p>\n    <h4>{`Update a global rule`}</h4>\n    <p>{`Global compatibility rules can be updated by issuing a PUT request to the `}<inlineCode parentName=\"p\">{`/rules/{rule-type}`}</inlineCode>{` endpoint, (where `}<inlineCode parentName=\"p\">{`{rule-type}`}</inlineCode>{` identifies the type of global rule to be updated - currently the only supported type is COMPATIBILITY), with the new rule configuration in the body of the request. If the request is successful then the newly updated rule config is returned in the payload of the response, together with a status code of 200 (OK).`}</p>\n    <p>{`Updating a global rule configuration requires at least:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Manager role access to the Event Streams cluster resource type`}</li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Update the compatibility globar rule from NONE to FORWARD with:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{` curl -u token:$APIKEY –X PUT $URL/rules/COMPATIBILITY -d '{\"type\":\"COMPATIBILITY\",\"config\":\"<COMPATIBILITY_MODE>\"}'`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$  curl -u token:$APIKEY -X PUT $URL/rules/COMPATIBILITY -d '{\"type\":\"COMPATIBILITY\",\"config\":\"FORWARD\"}'\n\n{\"type\":\"COMPATIBILITY\",\"config\":\"FORWARD\"}\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Verify it has been changed:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$APIKEY $URL/rules/COMPATIBILITY\n\n{\"type\":\"COMPATIBILITY\",\"config\":\"FORWARD\"}\n`}</code></pre>\n      </li>\n    </ol>\n    <h4>{`Get a per-schema rule`}</h4>\n    <p>{`To retrieve the current value of a type of rule being applied to a specific schema, a GET request is made to the `}<inlineCode parentName=\"p\">{`/artifacts/{schema-id}/rules/{rule-type}`}</inlineCode>{` endpoint, (where `}<inlineCode parentName=\"p\">{`{schema-id}`}</inlineCode>{` is the ID of the schema, and `}<inlineCode parentName=\"p\">{`{rule-type}`}</inlineCode>{` is the type of global rule to be retrieved - currently the only supported type is COMPATIBILITY). If the request is successful then the current rule value is returned in the payload of the response, together with a status code of 200 (OK).`}</p>\n    <p>{`Getting per-schema rules requires at least:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Reader role access to the Event Streams cluster resource type`}</li>\n      <li parentName=\"ul\">{`Reader role access to the schema resource to which the rule applies`}</li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Get the compatibility rule for our `}<inlineCode parentName=\"p\">{`test-value`}</inlineCode>{` schema with:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`curl -u token:$APIKEY $URL/artifacts/<YOUR_SCHEMA_ID>/rules/COMPATIBILITY`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$APIKEY $URL/artifacts/test-value/rules/COMPATIBILITY\n\n{\"error_code\":404,\"message\":\"no compatibility rule exists for artifact 'test-value'\"}\n`}</code></pre>\n        <p parentName=\"li\">{`which makes sense as we have not yet created a compatibility rule for the `}<inlineCode parentName=\"p\">{`test-value`}</inlineCode>{` schema`}</p>\n      </li>\n    </ol>\n    <h4>{`Create a per-schema rule`}</h4>\n    <p>{`Rules can be applied to a specific schema, overriding any global rules which have been set, by making a POST request to the `}<inlineCode parentName=\"p\">{`/artifacts/{schema-id}/rules`}</inlineCode>{` endpoint, (where `}<inlineCode parentName=\"p\">{`{schema-id}`}</inlineCode>{` is the ID of the schema), with the type and value of the new rule contained in the body of the request, (currently the only supported type is COMPATIBILITY). If successful an empty response, and a status code of 204 (no content) is returned.`}</p>\n    <p>{`Creating per-schema rules requires at least:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Reader role access to the Event Streams cluster resource type`}</li>\n      <li parentName=\"ul\">{`Manager role access to the schema resource for which the rule will apply`}</li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create a compatibility rule for our `}<inlineCode parentName=\"p\">{`test-value`}</inlineCode>{` schema with:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`curl -u token:$APIKEY $URL/artifacts/<YOUR_SCHEMA_ID>/rules -d '{\"type\":\"COMPATIBILITY\",\"config\":\"<COMPATIBILITY_MODE>\"}'`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$APIKEY $URL/artifacts/test-value/rules -d '{\"type\":\"COMPATIBILITY\",\"config\":\"FULL\"}'\n\n{\"type\":\"COMPATIBILITY\",\"config\":\"FULL\"}\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Make sure this compatibility rules has been created:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$APIKEY $URL/artifacts/test-value/rules/COMPATIBILITY\n\n{\"type\":\"COMPATIBILITY\",\"config\":\"FULL\"}\n`}</code></pre>\n      </li>\n    </ol>\n    <h4>{`Update a per-schema rule`}</h4>\n    <p>{`The rules applied to a specific schema are modified by making a PUT request to the `}<inlineCode parentName=\"p\">{`/artifacts/{schema-id}/rules/{rule-type}`}</inlineCode>{` endpoint, (where `}<inlineCode parentName=\"p\">{`{schema-id}`}</inlineCode>{` is the ID of the schema, and `}<inlineCode parentName=\"p\">{`{rule-type}`}</inlineCode>{` is the type of global rule to be retrieved - currently the only supported type is COMPATIBILITY). If the request is successful then the newly updated rule config is returned in the payload of the response, together with a status code of 200 (OK).`}</p>\n    <p>{`Updating a per-schema rule requires at least:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Reader role access to the Event Streams cluster resource type`}</li>\n      <li parentName=\"ul\">{`Manager role access to the schema resource to which the rule applies`}</li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Update the compatibility rule we have for our schema `}<inlineCode parentName=\"p\">{`test-value`}</inlineCode>{` with:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{` curl -u token:$APIKEY –X PUT $URL/artifacts/<YOUR_SCHEMA_ID>/rules/COMPATIBILITY -d '{\"type\":\"COMPATIBILITY\",\"config\":\"<COMPATIBILITY_MODE>\"}'`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$  curl -u token:$APIKEY -X PUT $URL/artifacts/test-value/rules/COMPATIBILITY -d '{\"type\":\"COMPATIBILITY\",\"config\":\"BACKWARD\"}'\n\n{\"type\":\"COMPATIBILITY\",\"config\":\"BACKWARD\"}\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Make sure the compatibility mode for our `}<inlineCode parentName=\"p\">{`test-value`}</inlineCode>{` schema is as expected:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$APIKEY $URL/artifacts/test-value/rules/COMPATIBILITY\n\n{\"type\":\"COMPATIBILITY\",\"config\":\"BACKWARD\"}\n`}</code></pre>\n      </li>\n    </ol>\n    <h4>{`Delete a per-schema rule`}</h4>\n    <p>{`The rules applied to a specific schema are deleted by making a DELETE request to the `}<inlineCode parentName=\"p\">{`/artifacts/{schema-id}/rules/{rule-type}`}</inlineCode>{` endpoint, (where `}<inlineCode parentName=\"p\">{`{schema-id}`}</inlineCode>{` is the ID of the schema, and `}<inlineCode parentName=\"p\">{`{rule-type}`}</inlineCode>{` is the type of global rule to be retrieved - currently the only supported type is COMPATIBILITY). If the request is successful then an empty response is returned, with a status code of 204 (no content).`}</p>\n    <p>{`Deleting a per-schema rule requires at least:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Reader role access to the Event Streams cluster resource type`}</li>\n      <li parentName=\"ul\">{`Manager role access to the schema resource to which the rule applies`}</li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Delete the compatibility rule we have for our `}<inlineCode parentName=\"p\">{`test-value`}</inlineCode>{` schema with:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`curl -u token:$APIKEY –X DELETE $URL/artifacts/<YOUR_SCHEMA_ID>/rules/COMPATIBILITY`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$APIKEY -X DELETE $URL/artifacts/test-value/rules/COMPATIBILITY\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Make sure there is no compatibility rule for our `}<inlineCode parentName=\"p\">{`test-value`}</inlineCode>{` schema now:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl -u token:$APIKEY $URL/artifacts/test-value/rules/COMPATIBILITY\n\n{\"error_code\":404,\"message\":\"no compatibility rule exists for artifact 'test-value'\"}\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Evolve your schemas`}</h3>\n    <p>{`In this section, we are going to review the different compatibility modes for our Avro data schemas to evolve (hence our data). For simplicity though, we are going to to review only the following types of schema compatibility and at the global level:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`None`}</li>\n      <li parentName=\"ol\">{`Backward`}</li>\n      <li parentName=\"ol\">{`Forward`}</li>\n      <li parentName=\"ol\">{`Full`}</li>\n    </ol>\n    <h3>{`None`}</h3>\n    <p>{`This compatibility rule does not perform any compatibility check at all when a new schema version is created.`}</p>\n    <p>{`That is, if we use the `}<inlineCode parentName=\"p\">{`test-value`}</inlineCode>{` schema we’ve used through this tutorial, and try to register a completely different schema like:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"namespace\": \"ibm.eda.default\",\n    \"doc\": \"New Default Message's value Avro data schema, completely different than its predecesors to demonstrate None compatibility\",\n    \"type\":\"record\",\n    \"name\":\"defaultValue\",\n    \"fields\":[\n            {\n                \"name\": \"anAttribute\",\n                \"type\":\"int\",\n                \"doc\": \"an attribute that is an integer\"\n            },\n            {\n                \"name\": \"anotherAttribute\",\n                \"type\":\"long\",\n                \"doc\": \"Just a long number\"\n            }\n     ]\n}\n`}</code></pre>\n    <p>{`it should work:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: test-value' \\\\\n        $URL/artifacts/test-value/versions \\\\\n        -d '{   \"namespace\": \"ibm.eda.default\",\n                \"doc\": \"New Default Message value Avro data schema, completely different than its predecesors to demonstrate None compatibility\",\n                \"type\":\"record\",\n                \"name\":\"defaultValue\",\n                \"fields\":[\n                    {\"name\": \"anAttribute\",\"type\":\"int\",\"doc\": \"an attribute that is an integer\"},\n                    {\"name\": \"anotherAttribute\",\"type\":\"long\",\"doc\": \"Just a long number\"}]}'\n\n{\"id\":\"test-value\",\"type\":\"AVRO\",\"version\":3,\"createdBy\":\"\",\"createdOn\":1589479701588,\"modifiedBy\":\"\",\"modifiedOn\":1589551226293,\"globalId\":23}\n`}</code></pre>\n    <p>{`As we can see, now the schema for the `}<inlineCode parentName=\"p\">{`test`}</inlineCode>{` topic will enforce that events coming into the topic are formed by an integer and a long number.`}</p>\n    <h3>{`New Schema`}</h3>\n    <p>{`For the following compatibility modes, we are going to use a new schema to describe a person. It will be called `}<inlineCode parentName=\"p\">{`demo-schema`}</inlineCode>{` and will looks like this:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"namespace\": \"schema.compatibility.test\",\n    \"name\": \"person\",\n    \"type\": \"record\",\n    \"fields\" : [\n        {\n            \"name\" : \"name\",\n            \"type\" : \"string\"\n        },\n        {\n            \"name\" : \"age\",\n            \"type\" : \"int\"\n        },\n        {\n            \"name\" : \"gender\",\n            \"type\" : \"string\"\n        }\n    ]\n }\n`}</code></pre>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Register the schema:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: demo-schema' \\\\\n        $URL/artifacts \\\\\n        -d '{\n            \"namespace\": \"schema.compatibility.test\",\n            \"name\": \"person\",\n            \"type\": \"record\",\n            \"fields\" : [\n                {\"name\" : \"name\", \"type\" : \"string\"},\n                {\"name\" : \"age\", \"type\" : \"int\"},\n                {\"name\" : \"gender\", \"type\" : \"string\"}]}'\n\n{\"id\":\"demo-schema\",\"type\":\"AVRO\",\"version\":1,\"createdBy\":\"\",\"createdOn\":1589553367867,\"modifiedBy\":\"\",\"modifiedOn\":1589553367867,\"globalId\":24}\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Backward`}</h3>\n    <p>{`First of all, set the compatibility mode to backwards at the global level (for simplicity):`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl -u token:$APIKEY -X PUT $URL/rules/COMPATIBILITY -d '{\"type\":\"COMPATIBILITY\",\"config\":\"BACKWARD\"}'\n\n{\"type\":\"COMPATIBILITY\",\"config\":\"BACKWARD\"}\n`}</code></pre>\n    <p>{`Now, What if we decide to change the data schema to add a new attribute such as place of birth? That is, the new schema would look like:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"namespace\": \"schema.compatibility.test\",\n    \"name\": \"person\",\n    \"type\": \"record\",\n    \"fields\" : [\n        {\n            \"name\" : \"name\",\n            \"type\" : \"string\"\n        },\n        {\n            \"name\" : \"age\",\n            \"type\" : \"int\"\n        },\n        {\n            \"name\" : \"gender\",\n            \"type\" : \"string\"\n        },\n        {\n            \"name\" : \"place_of_birth\",\n            \"type\" : \"string\"\n        }\n    ]\n}\n`}</code></pre>\n    <p>{`If we try to create a new version for our `}<inlineCode parentName=\"p\">{`demo-schema`}</inlineCode>{` to include the `}<inlineCode parentName=\"p\">{`place_of_birth`}</inlineCode>{` attribute with the compatibility mode set to backwards, we will get the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: demo-schema' \\\\\n        $URL/artifacts/demo-schema/versions \\\\\n        -d '{\n            \"namespace\": \"schema.compatibility.test\",\n            \"name\": \"person\",\n            \"type\": \"record\",\n            \"fields\" : [\n                {\"name\" : \"name\", \"type\" : \"string\"},\n                {\"name\" : \"age\", \"type\" : \"int\"},\n                {\"name\" : \"gender\", \"type\" : \"string\"},\n                {\"name\" : \"place_of_birth\",\"type\" : \"string\"}]}'\n\n{\"error_code\":409,\"message\":\"Schema failed compatibility check with version ID: demo-schema, schema not backward compatible: reader's 'record' schema named 'schema.compatibility.test.person' contains a field named 'place_of_birth' that does not match any field in the corresponding writer's schema. The reader's schema does not specify a default value for this field\"}\n`}</code></pre>\n    <p>{`We see we get an error that says that the new schema version we are trying to register for our `}<inlineCode parentName=\"p\">{`demo-schema`}</inlineCode>{` is not backward compatible because `}<em parentName=\"p\">{`“reader’s ‘record’ schema named ‘schema.compatibility.test.person’ contains a field named ‘place_of_birth’ that does not match any field in the corresponding writer’s schema. The reader’s schema does not specify a default value for this field”`}</em></p>\n    <p>{`As the reason above explains, backward compatibility means that `}<strong parentName=\"p\">{`consumers using the new schema can read data produced with the last schema`}</strong>{`. As it stands at the moment, this is not satisfied since the consumer with the newer version expects the attribute `}<inlineCode parentName=\"p\">{`place_of_birth`}</inlineCode>{`.`}</p>\n    <p>{`As the error explanation above also suggests, in order to include a new attribute in our schema when we have `}<strong parentName=\"p\">{`backward`}</strong>{` compatibility mode enabled, we need to provide a default value for it so that the consumer uses it when reading messages produced with the older version of the schema that will not include the newer attribute. That is,\nwe need our newer schema version to be like:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"namespace\": \"schema.compatibility.test\",\n    \"name\": \"person\",\n    \"type\": \"record\",\n    \"fields\" : [\n        {\n            \"name\" : \"name\",\n            \"type\" : \"string\"\n        },\n        {\n            \"name\" : \"age\",\n            \"type\" : \"int\"\n        },\n        {\n            \"name\" : \"gender\",\n            \"type\" : \"string\"\n        },\n        {\n            \"name\" : \"place_of_birth\",\n            \"type\" : \"string\",\n            \"default\": \"nonDefined\"\n        }\n    ]\n}\n`}</code></pre>\n    <p>{`so that the consumer will use `}<inlineCode parentName=\"p\">{`nonDefined`}</inlineCode>{` as the value for `}<inlineCode parentName=\"p\">{`place_of_birth`}</inlineCode>{` whenever it consumes messages produced with the older shcema version that do not include the attribute.`}</p>\n    <p>{`Let’s check:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: demo-schema' \\\\\n        $URL/artifacts/demo-schema/versions \\\\\n        -d '{\n            \"namespace\": \"schema.compatibility.test\",\n            \"name\": \"person\",\n            \"type\": \"record\",\n            \"fields\" : [\n                {\"name\" : \"name\", \"type\" : \"string\"},\n                {\"name\" : \"age\", \"type\" : \"int\"},\n                {\"name\" : \"gender\", \"type\" : \"string\"},\n                {\"name\" : \"place_of_birth\",\"type\" : \"string\",\"default\": \"nonDefined\"}]}'\n\n{\"id\":\"demo-schema\",\"type\":\"AVRO\",\"version\":2,\"createdBy\":\"\",\"createdOn\":1589553367867,\"modifiedBy\":\"\",\"modifiedOn\":1589556982143,\"globalId\":27}\n`}</code></pre>\n    <p>{`Effectively, we have just evolved our Avro data `}<inlineCode parentName=\"p\">{`demo-schema`}</inlineCode>{` schema to include a new attribute called `}<inlineCode parentName=\"p\">{`place_of_birth`}</inlineCode>{`.`}</p>\n    <p>{`Now, how about if we wanted to delete an attribute in our schema? Let’s try to remove the `}<inlineCode parentName=\"p\">{`gender`}</inlineCode>{` attribute:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: demo-schema' \\\\\n        $URL/artifacts/demo-schema/versions \\\\\n        -d '{\n            \"namespace\": \"schema.compatibility.test\",\n            \"name\": \"person\",\n            \"type\": \"record\",\n            \"fields\" : [\n                {\"name\" : \"name\", \"type\" : \"string\"},\n                {\"name\" : \"age\", \"type\" : \"int\"},\n                {\"name\" : \"place_of_birth\",\"type\" : \"string\",\"default\": \"nonDefined\"}]}'\n\n{\"id\":\"demo-schema\",\"type\":\"AVRO\",\"version\":3,\"createdBy\":\"\",\"createdOn\":1589553367867,\"modifiedBy\":\"\",\"modifiedOn\":1589557152931,\"globalId\":28}\n`}</code></pre>\n    <p>{`It worked. The resaon for this is that the consumer reading messages with the newer schema that does not contain the `}<inlineCode parentName=\"p\">{`gender`}</inlineCode>{` attribute, will simply ignore/drop all those attributes in the old person events/messages that are not defined in the newer data schema and just take in those that are defined. In this case, if it reads messages produced with the older data schema that come with the `}<inlineCode parentName=\"p\">{`gender`}</inlineCode>{` attribute, it will simply drop it.`}</p>\n    <h3>{`Forward`}</h3>\n    <p>{`First of all, set the compatibility mode to forward at the global level (for simplicity):`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl -u token:$APIKEY -X PUT $URL/rules/COMPATIBILITY -d '{\"type\":\"COMPATIBILITY\",\"config\":\"FORWARD\"}'\n\n{\"type\":\"COMPATIBILITY\",\"config\":\"FORWARD\"}\n`}</code></pre>\n    <p>{`Now, how about removing an attribute when the compatibility type configured is set to FORWARD? Let’s try to remove the `}<inlineCode parentName=\"p\">{`age`}</inlineCode>{` attribute:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: demo-schema' \\\\\n        $URL/artifacts/demo-schema/versions \\\\\n        -d '{\n            \"namespace\": \"schema.compatibility.test\",\n            \"name\": \"person\",\n            \"type\": \"record\",\n            \"fields\" : [\n                {\"name\" : \"name\", \"type\" : \"string\"},\n                {\"name\" : \"place_of_birth\",\"type\" : \"string\",\"default\": \"nonDefined\"}]}'\n\n{\"error_code\":409,\"message\":\"Schema failed compatibility check with version ID: demo-schema, schema not forward compatible: reader's 'record' schema named 'schema.compatibility.test.person' contains a field named 'age' that does not match any field in the corresponding writer's schema. The reader's schema does not specify a default value for this field\"}\n`}</code></pre>\n    <p>{`As the error above explains, the problem we have when we want to remove an attribute from our Avro data schema with the compatibility mode set to `}<inlineCode parentName=\"p\">{`forward`}</inlineCode>{` is that the producer will be sending messages without the removed attribute (`}<inlineCode parentName=\"p\">{`age`}</inlineCode>{` in our case) while the consumer will be reading messages with the older Avro data schema that expects such attribute, which is what the forward compatibility required: forward compatibility means that `}<strong parentName=\"p\">{`data produced with a new schema can be read by consumers using the last schema`}</strong>{`.`}</p>\n    <p>{`What can we do to have a schema that allows the producer to send messages that do not contain an attribute that the consumer expects?`}</p>\n    <p>{`The trick here is to first `}<strong parentName=\"p\">{`register an “intermediate” data schema that adds a default value`}</strong>{` to the attibute we want to remove from the schema (`}<inlineCode parentName=\"p\">{`age`}</inlineCode>{` in our case). This way, the “intermediate” data schema will become the older data schema for the consumers so when we register the new schema without the attribute we wanted to remove and produce data according to it (that is, without the `}<inlineCode parentName=\"p\">{`age`}</inlineCode>{` attribute) afterwards, the consumers will not complain since they will have in the schema they use (the “intermediate” schema) a default value for that attribute. And they will use that default value when reading messages without the `}<inlineCode parentName=\"p\">{`age`}</inlineCode>{` attribute.`}</p>\n    <p>{`That is, our intermediate schema will be:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"namespace\": \"schema.compatibility.test\",\n    \"name\": \"person\",\n    \"type\": \"record\",\n    \"fields\" : [\n        {\n            \"name\" : \"name\",\n            \"type\" : \"string\"\n        },\n        {\n            \"name\" : \"age\",\n            \"type\" : \"int\",\n            \"default\": 0,\n        },\n        {\n            \"name\" : \"place_of_birth\",\n            \"type\" : \"string\",\n            \"default\": \"nonDefined\"\n        }\n    ]\n}\n`}</code></pre>\n    <p>{`If we try to register that new version of our `}<inlineCode parentName=\"p\">{`demo-schema`}</inlineCode>{` schema:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: demo-schema' \\\\\n        $URL/artifacts/demo-schema/versions \\\\\n        -d '{\n            \"namespace\": \"schema.compatibility.test\",\n            \"name\": \"person\",\n            \"type\": \"record\",\n            \"fields\" : [\n                {\"name\" : \"name\", \"type\" : \"string\"},\n                {\"name\" : \"age\", \"type\" : \"int\", \"default\": 0},\n                {\"name\" : \"place_of_birth\",\"type\" : \"string\", \"default\": \"nonDefined\"}]}'\n\n{\"id\":\"demo-schema\",\"type\":\"AVRO\",\"version\":4,\"createdBy\":\"\",\"createdOn\":1589553367867,\"modifiedBy\":\"\",\"modifiedOn\":1589560847136,\"globalId\":30}\n`}</code></pre>\n    <p>{`we see we succeed since we are simply adding a default value for the newer schema. This intermediate schema, will become now the older schema at the consumer side but will still be forward compatible with the newer schema at the producer side because it now has a default value for `}<inlineCode parentName=\"p\">{`age`}</inlineCode>{`.  Let’s try now to add a new version of our `}<inlineCode parentName=\"p\">{`demo-schema`}</inlineCode>{` schema without the `}<inlineCode parentName=\"p\">{`age`}</inlineCode>{` attribute:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: demo-schema' \\\\\n        $URL/artifacts/demo-schema/versions \\\\\n        -d '{\n            \"namespace\": \"schema.compatibility.test\",\n            \"name\": \"person\",\n            \"type\": \"record\",\n            \"fields\" : [\n                {\"name\" : \"name\", \"type\" : \"string\"},\n                {\"name\" : \"place_of_birth\",\"type\" : \"string\", \"default\": \"nonDefined\"}]}'\n\n{\"id\":\"demo-schema\",\"type\":\"AVRO\",\"version\":5,\"createdBy\":\"\",\"createdOn\":1589553367867,\"modifiedBy\":\"\",\"modifiedOn\":1589561057270,\"globalId\":31}\n`}</code></pre>\n    <p>{`tada! we succeeded. As we said, the older schema now at the consumer side has a default value for `}<inlineCode parentName=\"p\">{`age`}</inlineCode>{` so the new messages produced with the newer schema coming without the `}<inlineCode parentName=\"p\">{`age`}</inlineCode>{` attribute can be successfully read by the consumer using the default value.`}</p>\n    <p>{`How about adding a new attribute when the compatibility mode is set to forward? Let’s try to add the attribute `}<inlineCode parentName=\"p\">{`siblings`}</inlineCode>{` to denote the number of borthers and sisters a person might have:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: demo-schema' \\\\\n        $URL/artifacts/demo-schema/versions \\\\\n        -d '{\n            \"namespace\": \"schema.compatibility.test\",\n            \"name\": \"person\",\n            \"type\": \"record\",\n            \"fields\" : [\n                {\"name\" : \"name\", \"type\" : \"string\"},\n                {\"name\" : \"place_of_birth\",\"type\" : \"string\", \"default\": \"nonDefined\"},\n                {\"name\" : \"siblings\", \"type\" : \"int\"}]}'\n\n{\"id\":\"demo-schema\",\"type\":\"AVRO\",\"version\":6,\"createdBy\":\"\",\"createdOn\":1589553367867,\"modifiedBy\":\"\",\"modifiedOn\":1589561302428,\"globalId\":32}\n`}</code></pre>\n    <p>{`Contrary to what happened when addign a new attribute to an Avro data schema when the compatibility mode is set to backward, adding an attribute to an Avro data schema when the compatibility mode is set to forward is not a problem because the new attributes coming with the messages that the consumer does not expect based on the older Avro data schema it uses will simply get dropped/skipped.`}</p>\n    <h3>{`Full`}</h3>\n    <p>{`First of all, set the compatibility mode to full at the global level (for simplicity):`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl -u token:$APIKEY -X PUT $URL/rules/COMPATIBILITY -d '{\"type\":\"COMPATIBILITY\",\"config\":\"FULL\"}'\n\n{\"type\":\"COMPATIBILITY\",\"config\":\"FULL\"}\n`}</code></pre>\n    <p>{`Full compatibility means `}<strong parentName=\"p\">{`data schemas are both backward and forward compatible`}</strong>{`. Data schemas evolve in a fully compatible way: `}<strong parentName=\"p\">{`old data can be read with the new data schema, and new data can also be read with the last data schema`}</strong>{`.`}</p>\n    <p>{`In some data formats, such as JSON, there are no full-compatible changes. Every modification is either only forward or only backward compatible. But in other data formats, like Avro, you can define fields with default values. In that case adding or removing a field with a default value is a fully compatible change.`}</p>\n    <p>{`So let’s see if we can delete the `}<inlineCode parentName=\"p\">{`place_of_birth`}</inlineCode>{` attribute (the only attribute in our data schema that defines a default value):`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: demo-schema' \\\\\n        $URL/artifacts/demo-schema/versions \\\\\n        -d '{\n            \"namespace\": \"schema.compatibility.test\",\n            \"name\": \"person\",\n            \"type\": \"record\",\n            \"fields\" : [\n                {\"name\" : \"name\", \"type\" : \"string\"},\n                {\"name\" : \"siblings\", \"type\" : \"int\"}]}'\n\n{\"id\":\"demo-schema\",\"type\":\"AVRO\",\"version\":7,\"createdBy\":\"\",\"createdOn\":1589553367867,\"modifiedBy\":\"\",\"modifiedOn\":1589562453126,\"globalId\":33}\n`}</code></pre>\n    <p>{`It seems it works. But how about removing an attribute that does not have a default value? Well, we need to do the trick of the “intermediate” schema again where we first add a default for that attribute and register the schema to later register a newer schema where we remove that attibute.`}</p>\n    <p>{`Let’s see adding a new attribute called `}<inlineCode parentName=\"p\">{`height`}</inlineCode>{` (remember we need to add a default value for it because of the full compatibility mode):`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl  -u token:$KAFKA_APIKEY \\\\\n        -H 'Content-Type: application/json' \\\\\n        -H 'X-Registry-ArtifactId: demo-schema' \\\\\n        $URL/artifacts/demo-schema/versions \\\\\n        -d '{\n            \"namespace\": \"schema.compatibility.test\",\n            \"name\": \"person\",\n            \"type\": \"record\",\n            \"fields\" : [\n                {\"name\" : \"name\", \"type\" : \"string\"},\n                {\"name\" : \"siblings\", \"type\" : \"int\"},\n                {\"name\" : \"height\", \"type\" : \"int\", \"default\": 0}]}'\n\n{\"id\":\"demo-schema\",\"type\":\"AVRO\",\"version\":8,\"createdBy\":\"\",\"createdOn\":1589553367867,\"modifiedBy\":\"\",\"modifiedOn\":1589562591316,\"globalId\":34}\n`}</code></pre>\n    <p>{`We see it also works. Now we know how a data schema can evolve when full compatibility is required.`}</p>\n    <p>{`As a final exercise, check how many times we have evolve our `}<inlineCode parentName=\"p\">{`demo-schema`}</inlineCode>{` schema for the compatibility rules:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ curl -u token:$KAFKA_APIKEY $URL/artifacts/demo-schema/versions\n\n[1,2,3,4,5,6,7,8]\n`}</code></pre>\n    <h2>{`Security`}</h2>\n    <p>{`As we have already mentioned during the this tutorial, we need to pay attention to the permissions we give to users, groups, applications (and thefore the clients they used to interact with IBM Event Streams on IBM Cloud), etc since we dont want everyone and everything to be, for instance, creating or deleting schemas or updating the compatibility modes for schema evolution.`}</p>\n    <p>{`As a result, the IBM Event Streams on IBM Cloud schema registry introduces a new IAM resource type: `}<strong parentName=\"p\">{`schema`}</strong>{`. This can be used as part of a CRN to identify a particular schema. For example:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`A CRN that names a specific schema (test-schema), for a particular instance of an Event Streams service:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`crn:v1:bluemix:public:messagehub:us-south:a/6db1b0d0b5c54ee5c201552547febcd8:91191e31-5642-4f2d-936f-647332dce3ae:schema:test-schema`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`A CRN that describes all of the schemas for a particular instance of the Event Streams service:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`crn:v1:bluemix:public:messagehub:us-south:a/6db1b0d0b5c54ee5c201552547febcd8:91191e31-5642-4f2d-936f-647332dce3ae:schema:`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`While not directly related to the addition of the schema resource type, it is also worth noting that it is possible to apply policies to a CRN describing a particular Event Streams instance. For example, policies granted at the scope of this CRN would affect all resources (topics, schemas, etc.) belonging to the cluster:`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`crn:v1:bluemix:public:messagehub:us-south:a/6db1b0d0b5c54ee5c201552547febcd8:91191e31-5642-4f2d-936f-647332dce3ae::`}</inlineCode></p>\n      </li>\n    </ul>\n    <p>{`With the addition of the new schema IAM resource type it is possible to create policies that control access using varying degrees of granularity, for example:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`a specific schema`}</li>\n      <li parentName=\"ul\">{`a set of schemas selected via a wildcard expression`}</li>\n      <li parentName=\"ul\">{`all of the schemas stored by an instance of IBM Event Streams`}</li>\n      <li parentName=\"ul\">{`all of the schemas stored by all of the instances of IBM Event Streams in an account`}</li>\n    </ul>\n    <p>{`Please, review the security documentation you can find `}<a parentName=\"p\" {...{\n        \"href\": \"../security/\"\n      }}>{`here`}</a>{` in order to understand how to create the policies for assigning specific permissions at the differentt levels of a cloud resource (that is, at the level of any Event Streams, a specific Event Streams instance but all topics, etc).`}</p>\n    <h3>{`Schema security role mapping`}</h3>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`Action`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Event Streams cluster resource`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Schema resource`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`Create schema`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Write`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`List schemas`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`Delete schema`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Manager`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`Create schema version`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Write`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`Get latest schema version`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`Get specific schema version`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`List all schema versions`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`Delete a schema version`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Manager`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h3>{`Compatibilitty rules security role mapping`}</h3>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`Action`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Event Streams cluster resource`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Schema resource`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`Update global rule`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Manager`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`-`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`Get global rule`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`-`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`Create per schema rule`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Manager`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`Get per schema rule`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`Update per schema rule`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Manager`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"right\"\n          }}>{`Delete per schema rule`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Read`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Manager`}</td>\n        </tr>\n      </tbody>\n    </table>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}