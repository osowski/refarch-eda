(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{QFif:function(e,n,t){"use strict";t.r(n),t.d(n,"_frontmatter",(function(){return s})),t.d(n,"default",(function(){return p}));t("91GP"),t("rGqo"),t("yt8O"),t("Btvt"),t("RW0V"),t("q1tI");var o=t("7ljp"),r=t("013z");t("qKvR");function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}var s={},i={_frontmatter:s},l=r.a;function p(e){var n=e.components,t=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,["components"]);return Object(o.b)(l,a({},i,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Development deployment uses one zookeeper server. For production the replicas is set to 5 to tolerate one planned and one unplanned failure. The service defines 3 ports: one for the inter-server communication, one for client access and one for leader-election.\nPersistence volumes are needed to provide durable storage. Better to use network storage like NFS or glusterfs."),Object(o.b)("p",null,"The zookeeper manifests are defined in this project under the ",Object(o.b)("inlineCode",{parentName:"p"},"deployments/zookeeper/dev")," folder. We are using our own docker images and the Dockerfile to build this image is in ",Object(o.b)("inlineCode",{parentName:"p"},"deployments/zookeeper"),". The image is already pushed to the Docker Hub under ibmcase account."),Object(o.b)("p",null,"We are providing a script to install zookeeper as a kubernetes environment. First be sure to be connected to your kubernetes cluster then run the following command:"),Object(o.b)("pre",null,Object(o.b)("code",a({parentName:"pre"},{}),"$ pwd\n> refarch-eda/deployments/zookeeper\n$ ./deployZoopeeker.sh\n\n$ kubectl get pods -n greencompute\nNAME                            READY     STATUS    RESTARTS   AGE\ngc-zookeeper-57dc5679bb-bh29q   1/1       Running   0          1m\n")),Object(o.b)("p",null,"It creates volume, services and deployment or statefulset."),Object(o.b)("p",null,"If you want to deploy it in more resilient deployment we provide other manifests under the prod folder. To install:"),Object(o.b)("pre",null,Object(o.b)("code",a({parentName:"pre"},{}),"$ ./deployZoopeeker.sh prod\n")),Object(o.b)("p",null,"Once installed you do not need to reinstall it."),Object(o.b)("p",null,"We are also delivering a script to remove zookeeper when you are done using it. (./removeZookeeper.sh)"),Object(o.b)("p",null," When running in production it is better to use separate zookeeper ensemble for each ",Object(o.b)("strong",{parentName:"p"},"Kafka")," cluster. Each server should have at least 2 GiB of heap with at least 4 GiB of reserved memory"))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-deployments-zookeeper-readme-mdx-32a355858c4366c5292d.js.map